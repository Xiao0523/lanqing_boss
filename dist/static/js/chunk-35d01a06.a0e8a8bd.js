(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35d01a06"],{"1af6":function(t,e,s){var n=s("63b6");n(n.S,"Array",{isArray:s("9003")})},"2e08":function(t,e,s){var n=s("9def"),a=s("9744"),o=s("be13");t.exports=function(t,e,s,r){var i=String(o(t)),c=i.length,u=void 0===s?" ":String(s),l=n(e);if(l<=c||""==u)return i;var g=l-c,h=a.call(u,Math.ceil(g/u.length));return h.length>g&&(h=h.slice(0,g)),r?h+i:i+h}},3846:function(t,e,s){s("9e1e")&&"g"!=/./g.flags&&s("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:s("0bfb")})},"4c73":function(t,e,s){"use strict";var n=s("fa22"),a=s.n(n);a.a},"549b":function(t,e,s){"use strict";var n=s("d864"),a=s("63b6"),o=s("241e"),r=s("b0dc"),i=s("3702"),c=s("b447"),u=s("20fd"),l=s("7cd6");a(a.S+a.F*!s("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,s,a,g,h=o(t),f="function"==typeof this?this:Array,d=arguments.length,A=d>1?arguments[1]:void 0,v=void 0!==A,m=0,p=l(h);if(v&&(A=n(A,d>2?arguments[2]:void 0,2)),void 0==p||f==Array&&i(p))for(e=c(h.length),s=new f(e);e>m;m++)u(s,m,v?A(h[m],m):h[m]);else for(g=p.call(h),s=new f;!(a=g.next()).done;m++)u(s,m,v?r(g,A,[a.value,m],!0):a.value);return s.length=m,s}})},"54a1":function(t,e,s){s("6c1c"),s("1654"),t.exports=s("95d5")},"6b54":function(t,e,s){"use strict";s("3846");var n=s("cb7c"),a=s("0bfb"),o=s("9e1e"),r="toString",i=/./[r],c=function(t){s("2aba")(RegExp.prototype,r,t,!0)};s("79e5")((function(){return"/a/b"!=i.call({source:"a",flags:"b"})}))?c((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?a.call(t):void 0)})):i.name!=r&&c((function(){return i.call(this)}))},"71db":function(t,e){t.exports="data:image/png;base64,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"},"75fc":function(t,e,s){"use strict";var n=s("a745"),a=s.n(n);function o(t){if(a()(t)){for(var e=0,s=new Array(t.length);e<t.length;e++)s[e]=t[e];return s}}var r=s("774e"),i=s.n(r),c=s("c8bb"),u=s.n(c);function l(t){if(u()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return i()(t)}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(t){return o(t)||l(t)||g()}s.d(e,"a",(function(){return h}))},"774e":function(t,e,s){t.exports=s("d2d5")},"95d5":function(t,e,s){var n=s("40c3"),a=s("5168")("iterator"),o=s("481b");t.exports=s("584a").isIterable=function(t){var e=Object(t);return void 0!==e[a]||"@@iterator"in e||o.hasOwnProperty(n(e))}},9744:function(t,e,s){"use strict";var n=s("4588"),a=s("be13");t.exports=function(t){var e=String(a(this)),s="",o=n(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(s+=e);return s}},a745:function(t,e,s){t.exports=s("f410")},a7a5:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAGVUlEQVRoQ+2aa2xURRTH/+fedpcClQ9tQoEEFHx8gETbRCBiAiQYwkPAB40SBbp3a6HbO0tBNCbGpokvQm27926phd0tKhrS+MKEhyKCRqJCpGiiKPIwEAWBJpJCS9vde8zsdqGUbrvbbmubMF/3zMz/d2bm3DNnljDEGw1x/bgN8H+vYMwVME3/WAA6M+YDuAtA+gCLbQRwmgi7AJi6rv3d1fxdAng8AScRGwDSBlh0rOmamUm43Q5fZ4NbAAwjsBrgTdKQCNuZrU2q2lrvcrmuDCRMVVXVyFBoeDaRVciMpyJzU6EQjuqOOm4CMIytk4DQLwBsRMjXdc0/kKJjzWWafo0ZWwC0AupkIVaejNp2AvB7AbgA8gnhyB8M4qMaDCOwBWAngCohtKJYAH8AuBvgHCGc9T0BeDy+KaqqjiHi31wux9me7Pvyu2H4sgE6AuCEENo9sQCuAbBnZaXbc3NzW2NNWFbmm2CzKdsBnt5uwwDeCwYvr1q7dm1zX4TG6ltXV2c7f76xBUCLENqwWABSCITQYobXkpL9KRkZJ48CNBnARQC/ApgqIxYR/LquyWXul2YY/lv0dT4DPQKYpn8RM3YQ4UQwqDxYXJz3r2H47wfwA4AUuz2YVVBQcKk/CJICYBj+dQDKiMIfFxEVapqBemZ+AOBpQjgPDVqAykrfUkWhOgA/A1enCiFaKipq71RVS4bftFAoOK64uODcoAUoLy9PS0kZdQzABADHAfwI4BEAmUT4SNe1J/tDvBwzKVtIDlRd7ZvS1kafREJupBHR3mCQcuWZGPQAUmBNTU1qW5ttVigUGkuEY/217zs6I2kr0F8e7mncQQng9QamWRa/TsSmrjs/7Q5i0AF4vbXzLcuSEW0EgBARCnVd2xwLYlABeL2BFZbFMsNMJcJ3zJhORGC2XhHC+WpXEIMGwDB8LwL0RiR48Wu67nzZMPwy+5W5vgqwt6HhrLu0tNTq90Ps8fjKiWg5M5a63dr+7vYwM5PXW1vBzG65ZZjhdru1qmgfj8f/GBE+ADBMXqYuXTqzorS09HpSmfQVMM2AyczR3PwygJlCaD91BVFSUmfLzGx8J3K74hZVVZ5xuRwfdrY1jMBMgHcAGCW/LYrS/Hj0NphUAMO4fvlpBvh7ALMBnCOyZuh6/umOwjZs8KenpdHHAM8BcJlIWaLreQe6OawyOdwDIAugwwAWCOG4mCwAMoxaE7Dkza1ZVXnJhQtnDmRkjN8JQAo8DtDDckIpsLJyy2hVVXcxcw4znyOiebFWqSNQebl/YmoqPmcOf+1/VxSea1n0p7TpmO4nmk6Tafq9zCiU4gFeIoT2hRw04mVIr+Yw43Bra+psVW0dk5Ki7AF4EsDHQyF1bnFxXlhEPE3CK4qyG0A2Ef5ixri+AJBhBKoAXg2gWVGUxUVFeXs7Col4W/lWeo0I3zDjPgCjARyy29MWFBQsS/ieYBjb7gBa5AdObtFw680K9Cg+Onh7ZeNgu3BZmtl97Vrq0vXrl1+Nx+tdx3/DTjTifWY80QsAJtMMbGLGKul5AIuE0L7sTozXG8gJhfgAUbia95YQ2vO9FR/tV1JSomRkjA8lCMDywFYDXACgCcDinsTfWAn/HGbsJIKNGevcbq28rxAJRqGbxTOri9zulfsSEWEYgacB3ib7ECnP6nqe/Ej1uiUA4FA8nsDbRHhOer434jusxBoAFbKqpijKws4HPxGauAGIsJk5Ip6IHtV1x1eJTNTZ1jR9G5jpBQCNKSnq7MLClfIamnCLG6B95KSIbx9LRrGtAC8HcEFVeYbL5TyRKEEiAE2qioUuV/fJWSICZEEsM/PUZ8yYx4xTzNZDa9bk/5PIGPEAhEuLssoQb7RJRMDGje+OsNvb5HacSkRHhg/nWZqmyYeMHlu8pcVwcVdVlWyXK+9oj6P2wqCsrCbTZlMPAnQvgH0NDenzS0tj12FvBIP4irvh8np/1zjbC2Hyay0rGtuLihzL5M2mO3/EWV6/8cAha/FCOAO9cHJcXdrrqV+35/0eXXfIcNtli/uBQ/bu/MSkKKhqakqt70suE1tY7SzA2s0cvoG9pOvam1HbyBOTLZtIif+JKdp5SD/yRSFufmbliQCNjGtvJM2IrwB0qlfPrEnTMAAD3f6rwQA4udsphvwK/Ad4J1NeinhqpwAAAABJRU5ErkJggg=="},b42b:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("section",{staticClass:"left"},[n("div",{staticClass:"list-box"},[n("div",{staticClass:"inner-warpper"},t._l(t.chatList,(function(e,s){return n("div",{key:e.targetId+s,staticClass:"content-warpper",class:{actived:e.targetId===t.firstId},on:{click:function(s){return t.changeChat(e.targetId)}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.unreadMessageCount,expression:"item.unreadMessageCount"}],staticClass:"message-tip"},[t._v(t._s(e.unreadMessageCount))]),t._v(" "),n("img",{attrs:{src:e.user&&e.user.portrait||"",alt:""}}),t._v(" "),n("div",{staticClass:"warpper-content"},[n("div",{staticClass:"font"},[n("span",[t._v(t._s(e.user&&e.user.name||"神秘用户"))]),t._v(" "),n("span",[t._v(t._s(t._f("timeStr")(e.latestMessage&&e.latestMessage.sentTime)))])]),t._v(" "),"RC:ImgMsg"===e.objectName?n("span",{staticClass:"message-content"},[t._v("收到一条图片消息")]):"RC:FileMsg"===e.objectName?n("span",{staticClass:"message-content"},[t._v("收到一条附件消息")]):"RC:VcMsg"===e.objectName?n("span",{staticClass:"message-content"},[t._v("收到一条语音消息")]):"RC:TxtMsg"===e.objectName&&e.latestMessage?n("span",{staticClass:"message-content"},[t._v(t._s(e.latestMessage&&e.latestMessage.content.content))]):"RC:TxtMsg"===e.objectName&&!e.latestMessage&&e.content?n("span",{staticClass:"message-content"},[t._v(t._s(e.content&&e.content.content))]):t._e()])])})),0)])]),t._v(" "),n("section",{staticClass:"right"},[n("div",{ref:"chat",staticClass:"chat-box"},[n("div",{staticClass:"chat-box-top"},[n("div",{staticClass:"title"},[t._v(t._s(t.firstUser&&t.firstUser.name))]),t._v(" "),n("div",{ref:"chatContent",staticClass:"chat-main",on:{"&scroll":function(e){return t.getScroll(e)}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.hasMsg,expression:"hasMsg"}],staticClass:"scroll-more"},[t._v("上拉加载更多")]),t._v(" "),t._l(t.messageContent,(function(e,a){return n("div",{key:e.sentTime+a,staticClass:"bubble",class:[e&&1==e.messageDirection?"master":"guest"]},[e&&1!==e.messageDirection?n("img",{staticClass:"photo",attrs:{src:e.content.user&&e.content.user.portrait,alt:""}}):t._e(),t._v(" "),n("div",{staticClass:"bubble-content"},["ImageMessage"===e.content.messageName?n("el-link",{staticClass:"img-boxs",attrs:{target:"_blank",href:e.content.imageUri}},[n("img",{attrs:{src:e.content.imageUri,alt:""}})]):t._e(),t._v(" "),"VoiceMessage"===e.content.messageName?n("span",[t._v("该消息是语音消息,PC端无法显示")]):t._e(),t._v(" "),"TextMessage"===e.content.messageName?n("span",[t._v(t._s(e.content.content))]):t._e(),t._v(" "),"FileMessage"===e.content.messageName?n("el-link",{attrs:{target:"_blank",href:e.content.fileUrl}},[n("div",{staticClass:"file-box"},[n("img",{attrs:{src:s("71db"),alt:"",height:"40",width:"40"}}),t._v(" "),n("span",[t._v(t._s(e.content.name))])])]):t._e()],1)])}))],2)]),t._v(" "),n("div",{staticClass:"chat-box-bottom"},[n("div",{staticClass:"tool"},[n("el-upload",{staticClass:"uploader",attrs:{action:t.uploadPic,name:"multipartFile","show-file-list":!1,"on-success":t.pushImgMsg,"on-change":t.onchange}},[n("img",{attrs:{src:s("a7a5"),alt:""}})])],1),t._v(" "),n("el-input",{staticClass:"textarea",attrs:{type:"textarea",resize:"none"},nativeOn:{keydown:function(e){return t.enterInput(e)}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),t._v(" "),n("div",{staticClass:"btn-box"},[n("el-button",{staticClass:"enter-btn",on:{click:t.onSend}},[t._v("发送")]),t._v(" "),n("span",{staticClass:"fonts"},[t._v("按Enter键发送，按Ctrl+Enter键换行")])],1)],1)])]),t._v(" "),n("el-dialog",{attrs:{visible:t.boxFlag},on:{close:function(e){t.boxFlag=!1}}},[n("h6",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[t._v("警告")]),t._v(" "),n("div",{staticClass:"dialog-box"},[n("span",[t._v("删除后将无法和该学员联系是否删除？")])]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.boxFlag=!1}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.clearMessage}},[t._v("删除")])],1)])],1)},a=[],o=s("db72"),r=(s("6762"),s("75fc")),i=(s("ac6a"),s("6bcb")),c=s("c466");function u(t,e,s){var n=null,a=null;return function(){var o=+new Date;a||(a=o),s&&o-a>s?(t(),a=o,clearTimeout(n)):(clearTimeout(n),n=setTimeout((function(){t(),a=null}),e))}}var l=s("39bb"),g=s("b775");function h(t){return g["a"].post("/boss/v2/rongCloud/userInfo",t)}function f(t,e){if(t.size<8e3&&"image/jpeg"===t.type)d(t);else try{var s=new Image;s.setAttribute("crossOrigin","anonymous"),s.src=e;var n=document.createElement("canvas"),a=n.getContext("2d");s.onload=function(){var t=this.width,e=this.height,o=50,r=50,i=t,c=e;(t>o||e>r)&&(t/e>o/r?(i=o,c=Math.round(o*(e/t))):(c=r,i=Math.round(r*(t/e)))),n.width=i,n.height=c,a.clearRect(0,0,i,c),a.drawImage(s,0,0,i,c);var u=n.toDataURL("image/jpeg",.92);return console.log(u),u}}catch(o){console.log("catch"),d(t)}}function d(t){var e=new FileReader;e.readAsDataURL(t),e.onload=function(t){var e=this.result;return e}}var A=s("60f0"),v=window.RongIMLib,m=v.RongIMClient,p={name:"Message",filters:{timeStr:function(t){return t&&Object(c["a"])(t,"hh:mm")||"刚刚"}},mixins:[i["a"],A["a"]],data:function(){return{text:"",messageList:[],sessionList:[],firstId:null,uploadPic:l["c"],messageContent:[],hasMsg:!1,firstUser:null,delId:null,boxFlag:!1,fileList:[],scrollTo:1,initHistory:!0,sequence:!0,getScroll:null,result:"",scrollBottom:!0,newSessionList:[],newId:"",users:{},idList:[],chatList:null,imageUrl:""}},computed:{flag:function(){return this.$store.state.user.messageInit}},watch:{flag:{handler:function(){this.flag&&this.fetchMessageList()},immediate:!0},sessionList:{handler:function(t,e){var s=this;if(!this.sessionList.length)return this.messageContent="",void(this.firstId="");this.sessionList.forEach((function(t){s.idList.push(t.targetId)}))},deep:!0},idList:{handler:function(t){t.length&&this.getInfo()},deep:!0},firstId:function(){this.getUserInfo(this.firstId),this.getMessage()}},created:function(){var t=this.$route.query.id;t&&(this.newId=t,this.$route.query.id="",this.idList=[this.newId].concat(Object(r["a"])(this.idList))),this.getScroll=u(this.paperScroll,300)},methods:{getUserInfo:function(t){var e=this,s=[t];h(s).then((function(t){if(t.code)return t.message&&e.$warn(t.message);e.firstUser=t.data[e.firstId]}))},getInfo:function(){var t=this,e=this.idList;h(e).then((function(e){if(e.code)return e.message&&t.$warn(e.message);t.users=e.data;var s=[];t.sessionList.forEach((function(t){s.push(t.targetId)})),t.newId&&(s.includes(t.newId)||t.sessionList.unshift({targetId:t.newId})),t.chatList=JSON.parse(JSON.stringify(t.sessionList)),t.chatList.forEach((function(s){t.$set(s,"user",e.data[s.targetId])})),t.firstId||(t.firstId=t.newId||t.chatList[0].targetId)}))},changeChat:function(t){this.firstId!==t&&(this.firstId=t,this.scrollBottom=!0,this.messageContent=[],this.sequence=!0)},enterInput:function(t){13===t.keyCode&&t.ctrlKey?this.text+="\n":13===t.keyCode&&(t.preventDefault(),this.onSend())},clearBox:function(t){this.boxFlag=!0,this.delId=t},fetchMessageList:function(){var t=[v.ConversationType.PRIVATE],e=150,s=this;m.getInstance().getConversationList({onSuccess:function(t){s.sessionList=t},onError:function(t){console.log("获取会话列表失败",t)}},t,e)},getLockMessage:function(){var t=v.ConversationType.PRIVATE,e=this.firstId;m.getInstance().getConversation(t,e,{onSuccess:function(t){t&&console.log("获取指定会话成功",t)}})},getMessage:function(){if(this.firstId){var t=v.ConversationType.PRIVATE,e=this.firstId||this.newId,s=null,n=20;this.sequence?s=0:this.messageContent.length>0&&(s=this.messageContent[0].sentTime),this.initHistory=!1;var a=this;v.RongIMClient.getInstance().getHistoryMessages(t,e,s,n,{onSuccess:function(t,e){if(a.hasMsg=e,a.sequence){for(var s=0;s<t.length;s++)a.messageContent.push(t[s]);a.onScroller(),a.sequence=!1}else{for(var n=t.reverse(),o=0;o<n.length;o++)a.messageContent.unshift(t[o]);a.onScroller()}a.clearUnRead()},onError:function(t){console.log("获取历史消息失败",t)}})}},clearUnRead:function(){var t=v.ConversationType.PRIVATE,e=this.firstId;m.getInstance().clearUnreadCount(t,e,{onSuccess:function(){},onError:function(t){console.log("清除指定会话未读消息数失败",t)}})},clearMessage:function(){var t=v.ConversationType.PRIVATE,e=this.delId,s=this;m.getInstance().removeConversation(t,e,{onSuccess:function(t){s.boxFlag=!1,s.fetchMessageList()},onError:function(t){console.log("删除指定会话失败",t)}})},onScroller:function(){var t=this;this.$nextTick((function(){t.scrollBottom?(t.$refs.chatContent.scrollTop=t.$refs.chatContent.scrollHeight+100,t.scrollBottom=!1):t.$refs.chatContent.scrollTop=20}))},paperScroll:function(){this.$refs.chatContent.scrollTop<=10&&this.hasMsg&&this.getMessage()},onSend:function(){if(!this.text)return this.$confirm("不能为空","错误",{confirmButtonText:"确定"}).then((function(){return!1})),!1;var t={content:this.text,extra:""},e=new v.TextMessage(t),s=v.ConversationType.PRIVATE,n=this.firstId,a=this;m.getInstance().sendMessage(s,n,e,{onSuccess:function(t){for(var e in a.text="",a.chatList)if(a.chatList[e].targetId===t.targetId){a.chatList[e]=Object(o["a"])({},a.chatList[e],{},t);break}a.messageContent.push(t),a.scrollBottom=!0,a.onScroller()},onError:function(t){console.log("发送文本消息失败",t)}})},onchange:function(t,e){this.imageUrl=URL.createObjectURL(t.raw)},pushImgMsg:function(t,e){if(t.code)return t.message&&this.$warn(t.message);var s=this,n=f(e.raw,this.imageUrl),a=t.data,r=new v.ImageMessage({content:n,imageUri:a}),i=v.ConversationType.PRIVATE,c=s.firstId,u={onSuccess:function(t){for(var e in s.chatList)if(s.chatList[e].targetId===t.targetId){s.chatList[e]=Object(o["a"])({},s.chatList[e],{},t);break}s.messageContent.push(t),s.scrollBottom=!0,s.onScroller()},onError:function(t){console.log("发送图片消息失败",t)}};m.getInstance().sendMessage(i,c,r,u)}}},b=p,w=(s("4c73"),s("2877")),C=Object(w["a"])(b,n,a,!1,null,"18370434",null);e["default"]=C.exports},c466:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));s("28a5"),s("f576"),s("a481"),s("6b54"),s("7618");function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss",s=(new Date).getTime();t||(t=s);while(t.toString().length<13)t+="0";var n=new Date(t);n.getMonth();var a={year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate(),hours:n.getHours(),minutes:n.getMinutes(),seconds:n.getSeconds()};switch(a.day<10&&(a.day="0"+a.day),a.minutes<10&&(a.minutes="0"+a.minutes),e){case"YYYY-MM-DD hh:mm:ss":return"".concat(a.year,"-").concat(a.month,"-").concat(a.day," ").concat(a.hours,":").concat(a.minutes,":").concat(a.seconds);case"YYYY-MM-DD":return"".concat(a.year,"-").concat(a.month,"-").concat(a.day);case"MM-DD":return"".concat(a.month,"-").concat(a.day);case"hh:mm:ss":return"".concat(a.hours,":").concat(a.minutes,":").concat(a.seconds);case"hh:mm":return"".concat(a.hours,":").concat(a.minutes);case"computed":if(s>t){var o=Math.abs(t-s),r=o/1e3,i=r/60,c=i/60,u=c/24,l=u/7;if(~~l>0&&l<3)return~~l+"周前";if(u<7&&~~u>0)return~~u+"天前";if(~~c>0&&c<24)return~~c+"小时前";if(~~i>0&&i<60)return~~i+"分钟前";if(~~r>0&&r<60)return~~r+"秒前"}else console.log("未来的时间");return"".concat(a.year,"-").concat(a.month,"-").concat(a.day," ").concat(a.hours,":").concat(a.minutes,":").concat(a.seconds)}}},c8bb:function(t,e,s){t.exports=s("54a1")},d2d5:function(t,e,s){s("1654"),s("549b"),t.exports=s("584a").Array.from},f410:function(t,e,s){s("1af6"),t.exports=s("584a").Array.isArray},f576:function(t,e,s){"use strict";var n=s("5ca1"),a=s("2e08"),o=s("a25f"),r=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);n(n.P+n.F*r,"String",{padStart:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},fa22:function(t,e,s){}}]);