(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d12765c"],{"2ddf":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a={methods:{goBack:function(){var t=this;this.$confirm("正在离开本页面，本页面内所有未保存数据都会丢失","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.clearLocal&&t.clearLocal(),t.$router.go(-1)})).catch((function(){return!1}))}}}},"2e08":function(t,e,n){var a=n("9def"),r=n("9744"),o=n("be13");t.exports=function(t,e,n,c){var s=String(o(t)),i=s.length,l=void 0===n?" ":String(n),u=a(e);if(u<=i||""==l)return s;var d=u-i,f=r.call(l,Math.ceil(d/l.length));return f.length>d&&(f=f.slice(0,d)),c?f+s:s+f}},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"456d":function(t,e,n){var a=n("4bf8"),r=n("0d58");n("5eda")("keys",(function(){return function(t){return r(a(t))}}))},"575f":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"container"},[n("div",{staticClass:"page-head-wraper"},[n("page-head",{attrs:{content:t.title},on:{back:t.goBack}})],1),t._v(" "),n("div",{staticClass:"wraper"},[n("el-form",{ref:"content",staticClass:"content",attrs:{model:t.content,rules:t.content,"label-width":"7em"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程封面"}},[n("el-upload",{staticClass:"uploader",attrs:{action:t.uploadUrl,name:"multipartFile","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.content.cover?n("img",{staticClass:"avatar",attrs:{src:t.content.cover}}):n("i",{staticClass:"el-icon-picture uploader-icon"})]),t._v(" "),n("p",{staticClass:"upload-tips"},[t._v("只能上传jpg/png文件，建议尺寸为513x321px。")]),t._v(" "),n("input",{attrs:{type:"hidden"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"学员风采"}},[n("el-upload",{staticClass:"student-uploader",attrs:{name:"multipartFile","list-type":"picture-card",action:t.uploadUrl,"on-success":t.handleStudentSuccess,"on-remove":t.handleStudentRemove,"file-list":t.studentList,"before-upload":t.beforeAvatarUpload}},[n("i",{staticClass:"el-icon-picture"}),t._v(" "),n("div",{staticClass:"upload-tips",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且最多上传9张，建议尺寸宽为750，高不宜超过1200px。")])])],1)],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程名称"}},[n("el-input",{attrs:{placeholder:"请输入课程名称"},model:{value:t.content.name,callback:function(e){t.$set(t.content,"name","string"===typeof e?e.trim():e)},expression:"content.name"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"开课日期"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"请选择开课日期"},model:{value:t.content.beginDate,callback:function(e){t.$set(t.content,"beginDate","string"===typeof e?e.trim():e)},expression:"content.beginDate"}})],1)],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程价格"}},[n("el-input",{attrs:{placeholder:"请输入课程价格"},model:{value:t.content.price,callback:function(e){t.$set(t.content,"price",t._n(e))},expression:"content.price"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"班型"}},[n("el-input",{attrs:{placeholder:"请输入班级人数"},model:{value:t.content.enrolment,callback:function(e){t.$set(t.content,"enrolment",t._n(e))},expression:"content.enrolment"}})],1)],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"适合年龄段"}},[n("el-select",{attrs:{placeholder:"请选择年龄段"},model:{value:t.content.ageInterval,callback:function(e){t.$set(t.content,"ageInterval",e)},expression:"content.ageInterval"}},t._l(t.ageList,(function(t){return n("el-option",{key:t.value+t.label,attrs:{value:t.value,label:t.label}})})),1)],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程时长"}},[n("el-input",{attrs:{placeholder:"请输入课程时长"},model:{value:t.content.hours,callback:function(e){t.$set(t.content,"hours",t._n(e))},expression:"content.hours"}})],1)],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程类目"}},[n("el-select",{attrs:{placeholder:"请选择课程类目"},on:{change:t.cateChange},model:{value:t.content.categoryId,callback:function(e){t.$set(t.content,"categoryId",e)},expression:"content.categoryId"}},t._l(t.categoryValList,(function(t){return n("el-option",{key:t.categoryName+t.categoryId,attrs:{value:t.categoryId,label:t.categoryName}})})),1)],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程标签"}},[n("el-input",{attrs:{placeholder:"请输入标签展示课程优势"},model:{value:t.content.tags,callback:function(e){t.$set(t.content,"tags",e)},expression:"content.tags"}}),t._v(" "),n("div",{staticClass:"tags-msg"},[t._v("多个标识用半角逗号分隔")])],1)],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"推荐讲师"}},[n("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择讲师"},model:{value:t.content.teachers,callback:function(e){t.$set(t.content,"teachers",e)},expression:"content.teachers"}},t._l(t.teacherList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.realName,value:t.id}})})),1),t._v(" "),n("el-button",{staticClass:"add-teacher-btn",on:{click:t.addTeacher}},[t._v("新增讲师")])],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程大纲"}},[n("el-upload",{attrs:{action:t.uploadFile,"before-upload":t.handlePdfPreview,"on-success":t.handlePdfSuccess,"on-remove":t.handlePdfRemove,limit:1,name:"multipartFile"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),n("div",{staticClass:"upload-tips outline-tip",attrs:{slot:"tip"},slot:"tip"},[t._v("建议上传格式为pdf，以便用户手机下载预览。")])],1)],1)],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:20}},[n("el-form-item",{attrs:{label:"简单描述"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入简单描述",rows:2},model:{value:t.content.simple_words,callback:function(e){t.$set(t.content,"simple_words",e)},expression:"content.simple_words"}})],1)],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:20}},[n("el-form-item",{attrs:{label:"课程介绍"}},[n("Tinymce",{model:{value:t.content.detailWords,callback:function(e){t.$set(t.content,"detailWords",e)},expression:"content.detailWords"}})],1)],1)],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save("content")}}},[t._v("保存")]),t._v(" "),n("el-button",{on:{click:function(e){return t.goBack()}}},[t._v("取消")])],1)],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},r=[],o=n("7618"),c=(n("7f7f"),n("c5f6"),n("ac6a"),n("9afb")),s=n("66da"),i=n("cabd"),l=n("0de1"),u=n("39bb"),d=n("c466"),f=n("8256"),h=n("2ddf"),g=n("c57c"),p={name:"CourseEdit",components:{PageHead:l["a"],Tinymce:f["a"]},mixins:[h["a"]],data:function(){return{categoryStr:"",content:{ageInterval:"",beginDate:"",categoryId:"",cover:"",detailWords:"",enrolment:"",hours:"",name:"",outline:"",price:"",studentStyle:[],tags:"",teachers:[],simple_words:""},title:"新增课程",teacherStr:"",isEdit:!1,courseFormRules:{},teacherArr:[],imageUrl:"",dialogImageUrl:"",dialogVisible:!1,fileList:[],uploadUrl:u["c"],uploadFile:u["b"],isLeaveShow:!1,categoryValList:[],teacherList:[],studentList:[],ageList:[{value:0,label:"0-3"},{value:1,label:"3-6"},{value:2,label:"6-9"},{value:3,label:"9-12"},{value:4,label:"12-15"},{value:5,label:"15-18"}],isAdd:!0}},created:function(){var t=this;if(this.getgetCategory(),Object(g["a"])("cursorView")&&String(Object(g["a"])("cursorAdd")))return this.content=Object(g["a"])("cursorView"),this.isAdd=Object(g["a"])("cursorAdd"),console.log(this.content),this.content.studentStyle.forEach((function(e){t.studentList.push({url:e})})),this.getTeacher(),void this.clearLocal();var e=this.$route.query.id;e&&(this.isAdd=!1,this.getView(e))},methods:{clearLocal:function(){Object(g["b"])("cursorAdd",""),Object(g["b"])("cursorView","")},addTeacher:function(){Object(g["b"])("cursorAdd",this.isAdd),Object(g["b"])("cursorView",this.content),this.$router.push({name:"TeacherEdit",query:{otherFlag:!0}})},getView:function(t){var e=this,n={id:t};Object(i["h"])(n).then((function(t){if(t.code)return t.message&&e.$warn(t.message);t.data&&(e.content=JSON.parse(JSON.stringify(t.data)),e.content.studentStyle.forEach((function(t){e.studentList.push({url:t})})),e.content.price=Number(t.data.price),e.content.hours=Number(t.data.hours),e.content.teachers=[],t.data.teachers.forEach((function(t){e.content.teachers.push(t.id)})),e.getTeacher())}))},getgetCategory:function(){var t=this;Object(s["c"])().then((function(e){if(e.code)return e.message&&t.$warn(e.message);e.data&&(t.categoryValList=e.data)}))},cateChange:function(){console.log(this.content.categoryId),this.content.teachers=[],this.getTeacher()},handleAvatarSuccess:function(t,e){if(t.code)return t.message&&this.$warn(t.message);t.data&&(this.content.cover=t.data)},handleDetailSuccess:function(t,e){if(t.code)return t.message&&this.$warn(t.message);t.data&&(this.content.detailPic=t.data)},handleStudentSuccess:function(t,e){if(t.code)return t.message&&this.$warn(t.message);t.data&&this.content.studentStyle.push(t.data)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type;return e||this.$message.error("请上传JPG/PNG格式的图片"),e},handlePdfSuccess:function(t,e){if(t.code)return t.message&&this.$warn(t.message);t.data&&(this.content.outline=t.data)},handlePdfRemove:function(){this.content.outline=""},handlePdfPreview:function(t){var e="application/pdf"===t.type,n=t.size/1024/1024<200;return e||this.$message.error("上传课程大纲只能是 PDF 格式!"),n||this.$message.error("上传课程大纲大小不能超过 200MB!"),n&&e},handleStudentRemove:function(t,e){if("success"!==t.status)return this.$warn("删除失败");if(t.url){var n=this.content.studentStyle.indexOf(t.url);this.content.studentStyle.splice(n,1)}},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},delTeacher:function(t,e){this.teacherArr.splice(e,1)},handleExceed:function(t,e){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},beforeRemove:function(t,e){return this.$confirm("确定移除 ".concat(t.name,"？"))},save:function(t){var e=this;this.$refs[t].validate((function(t){if(t){var n=JSON.parse(JSON.stringify(e.content)),a=e.isAdd?i["a"]:i["d"];"object"===Object(o["a"])(e.content.beginDate)&&(n.beginDate=Object(d["a"])(e.content.beginDate.getTime(),"YYYY-MM-DD")),a(n).then((function(t){if(t.code)return t.message&&e.$warn(t.message);e.$success(t.message),e.$router.push({name:"Course"})}))}}))},getTeacher:function(){var t=this,e={categoryId:this.content.categoryId};Object(c["f"])(e).then((function(e){if(e.code)return e.message&&t.$warn(e.message);e.data&&(console.log(e.data),t.teacherList=e.data)}))},isNumber:function(t){"number"!==typeof this.content[t]&&this.$warn("必须是数字")}}},m=p,v=(n("c2d4"),n("2877")),b=Object(v["a"])(m,a,r,!1,null,"32081797",null);e["default"]=b.exports},"5eda":function(t,e,n){var a=n("5ca1"),r=n("8378"),o=n("79e5");t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],c={};c[t]=e(n),a(a.S+a.F*o((function(){n(1)})),"Object",c)}},"66da":function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return c})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return i})),n.d(e,"d",(function(){return l}));var a=n("b775");function r(){return a["a"].get("/boss/v2/category")}function o(){return a["a"].get("/boss/v2/category/one")}function c(t){var e=t.id;return a["a"].get("/boss/v2/category/two/"+e)}function s(t){var e=t.id;return a["a"].post("/boss/v2/category/"+e)}function i(t){var e=t.id;return a["a"].delete("/boss/v2/category/"+e)}function l(){return a["a"].get("/boss/v2/curriculum/category")}},"6b54":function(t,e,n){"use strict";n("3846");var a=n("cb7c"),r=n("0bfb"),o=n("9e1e"),c="toString",s=/./[c],i=function(t){n("2aba")(RegExp.prototype,c,t,!0)};n("79e5")((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?i((function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?r.call(t):void 0)})):s.name!=c&&i((function(){return s.call(this)}))},9744:function(t,e,n){"use strict";var a=n("4588"),r=n("be13");t.exports=function(t){var e=String(r(this)),n="",o=a(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},"9afb":function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return i})),n.d(e,"c",(function(){return l}));var a=n("b775");function r(t){return a["a"].post("/boss/v2/teacherList",t)}function o(t){return a["a"].post("/boss/v2/teacher",t)}function c(t){return a["a"].patch("/boss/v2/teacher",t)}function s(t){var e=t.id;return a["a"].get("/boss/v2/teacher/"+e)}function i(t){return a["a"].post("/boss/v2/teacher/student",t)}function l(t){var e=t.id,n=t.status;return a["a"].post("/boss/v2/teacher/"+e+"/"+n)}},c2d4:function(t,e,n){"use strict";var a=n("f2dd"),r=n.n(a);r.a},c466:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return r}));n("28a5"),n("f576"),n("a481"),n("6b54"),n("7618");function a(t){var e=new Date(t),n=e.getFullYear(),a=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,r=e.getDate()<10?"0"+e.getDate():e.getDate(),o=e.getHours()<10?"0"+e.getHours():e.getHours(),c=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),s=new Date,i=s.getFullYear(),l=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,u=s.getDate()<10?"0"+s.getDate():s.getDate();return i===n&&l===a&&u===r?o+":"+c:a+"-"+r+" "+o+":"+c}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss",n=(new Date).getTime();t||(t=n);while(t.toString().length<13)t+="0";var a=new Date(t);a.getMonth();var r={year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hours:a.getHours(),minutes:a.getMinutes(),seconds:a.getSeconds()};switch(r.day<10&&(r.day="0"+r.day),r.minutes<10&&(r.minutes="0"+r.minutes),e){case"YYYY-MM-DD hh:mm:ss":return"".concat(r.year,"-").concat(r.month,"-").concat(r.day," ").concat(r.hours,":").concat(r.minutes,":").concat(r.seconds);case"YYYY-MM-DD":return"".concat(r.year,"-").concat(r.month,"-").concat(r.day);case"MM-DD":return"".concat(r.month,"-").concat(r.day);case"hh:mm:ss":return"".concat(r.hours,":").concat(r.minutes,":").concat(r.seconds);case"hh:mm":return"".concat(r.hours,":").concat(r.minutes);case"computed":if(n>t){var o=Math.abs(t-n),c=o/1e3,s=c/60,i=s/60,l=i/24,u=l/7;if(~~u>0&&u<3)return~~u+"周前";if(l<7&&~~l>0)return~~l+"天前";if(~~i>0&&i<24)return~~i+"小时前";if(~~s>0&&s<60)return~~s+"分钟前";if(~~c>0&&c<60)return~~c+"秒前"}else console.log("未来的时间");return"".concat(r.year,"-").concat(r.month,"-").concat(r.day," ").concat(r.hours,":").concat(r.minutes,":").concat(r.seconds)}}},cabd:function(t,e,n){"use strict";n.d(e,"g",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"h",(function(){return c})),n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"e",(function(){return d}));var a=n("b775");function r(t){return a["a"].post("/boss/v2/curriculumList",t)}function o(t){return a["a"].post("/boss/v2/curriculum",t)}function c(t){var e=t.id;return a["a"].get("/boss/v2/curriculum/"+e)}function s(t){var e=t.id;return a["a"].get("/boss/v2/curriculum/off/"+e)}function i(t){var e=t.id;return a["a"].get("/boss/v2/curriculum/on/"+e)}function l(t){return a["a"].patch("/boss/v2/curriculum",t)}function u(t){return a["a"].post("/boss/v2/curriculum4teacher",t)}function d(t){return a["a"].post("/boss/v2/curriculum/distributionTeacher4Student",t)}},f2dd:function(t,e,n){},f576:function(t,e,n){"use strict";var a=n("5ca1"),r=n("2e08"),o=n("a25f"),c=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);a(a.P+a.F*c,"String",{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!0)}})}}]);