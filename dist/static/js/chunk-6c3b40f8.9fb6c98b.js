(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c3b40f8"],{"28a5":function(t,e,n){"use strict";var a=n("aae3"),r=n("cb7c"),o=n("ebd6"),c=n("0390"),i=n("9def"),s=n("5f1b"),l=n("520a"),u=n("79e5"),d=Math.min,f=[].push,h="split",g="length",p="lastIndex",v=4294967295,m=!u((function(){RegExp(v,"y")}));n("214f")("split",2,(function(t,e,n,u){var b;return b="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[g]||2!="ab"[h](/(?:ab)*/)[g]||4!="."[h](/(.?)(.?)/)[g]||"."[h](/()()/)[g]>1||""[h](/.?/)[g]?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!a(t))return n.call(r,t,e);var o,c,i,s=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,h=void 0===e?v:e>>>0,m=new RegExp(t.source,u+"g");while(o=l.call(m,r)){if(c=m[p],c>d&&(s.push(r.slice(d,o.index)),o[g]>1&&o.index<r[g]&&f.apply(s,o.slice(1)),i=o[0][g],d=c,s[g]>=h))break;m[p]===o.index&&m[p]++}return d===r[g]?!i&&m.test("")||s.push(""):s.push(r.slice(d)),s[g]>h?s.slice(0,h):s}:"0"[h](void 0,0)[g]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,a){var r=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r,a):b.call(String(r),n,a)},function(t,e){var a=u(b,t,this,e,b!==n);if(a.done)return a.value;var l=r(t),f=String(this),h=o(l,RegExp),g=l.unicode,p=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(m?"y":"g"),y=new h(m?l:"^(?:"+l.source+")",p),S=void 0===e?v:e>>>0;if(0===S)return[];if(0===f.length)return null===s(y,f)?[f]:[];var w=0,_=0,x=[];while(_<f.length){y.lastIndex=m?_:0;var $,k=s(y,m?f:f.slice(_));if(null===k||($=d(i(y.lastIndex+(m?0:_)),f.length))===w)_=c(f,_,g);else{if(x.push(f.slice(w,_)),x.length===S)return x;for(var C=1;C<=k.length-1;C++)if(x.push(k[C]),x.length===S)return x;_=w=$}}return x.push(f.slice(w)),x}]}))},"2e08":function(t,e,n){var a=n("9def"),r=n("9744"),o=n("be13");t.exports=function(t,e,n,c){var i=String(o(t)),s=i.length,l=void 0===n?" ":String(n),u=a(e);if(u<=s||""==l)return i;var d=u-s,f=r.call(l,Math.ceil(d/l.length));return f.length>d&&(f=f.slice(0,d)),c?f+i:i+f}},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"3b58":function(t,e,n){},"575f":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"container"},[n("div",{staticClass:"page-head-wraper"},[n("page-head",{attrs:{content:t.title},on:{back:t.goBack}})],1),t._v(" "),n("div",{staticClass:"wraper"},[n("el-form",{ref:"content",staticClass:"content",attrs:{model:t.content,rules:t.content,"label-width":"7em"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程封面"}},[n("el-upload",{staticClass:"uploader",attrs:{action:t.uploadUrl,name:"multipartFile","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.content.cover?n("img",{staticClass:"avatar",attrs:{src:t.content.cover}}):n("i",{staticClass:"el-icon-picture uploader-icon"})]),t._v(" "),n("p",{staticClass:"upload-tips"},[t._v("只能上传jpg/png文件，建议尺寸为513x321px。")]),t._v(" "),n("input",{attrs:{type:"hidden"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"学员风采"}},[n("el-upload",{staticClass:"student-uploader",attrs:{name:"multipartFile","list-type":"picture-card",action:t.uploadUrl,"on-success":t.handleStudentSuccess,"on-remove":t.handleStudentRemove,"file-list":t.studentList}},[n("i",{staticClass:"el-icon-picture"}),t._v(" "),n("div",{staticClass:"upload-tips",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且最多上传9张，建议尺寸宽为750，高不宜超过1200px。")])])],1)],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程名称"}},[n("el-input",{attrs:{placeholder:"请输入课程名称"},model:{value:t.content.name,callback:function(e){t.$set(t.content,"name","string"===typeof e?e.trim():e)},expression:"content.name"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"开课日期"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"请选择开课日期"},model:{value:t.content.beginDate,callback:function(e){t.$set(t.content,"beginDate","string"===typeof e?e.trim():e)},expression:"content.beginDate"}})],1)],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程价格"}},[n("el-input",{attrs:{placeholder:"请输入课程价格"},model:{value:t.content.price,callback:function(e){t.$set(t.content,"price",t._n(e))},expression:"content.price"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"班型"}},[n("el-input",{attrs:{placeholder:"请输入班级人数"},model:{value:t.content.price,callback:function(e){t.$set(t.content,"price",t._n(e))},expression:"content.price"}})],1)],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"适合年龄段"}},[n("el-select",{attrs:{placeholder:"请选择年龄段"},on:{change:t.ageChange},model:{value:t.ageStr,callback:function(e){t.ageStr=e},expression:"ageStr"}},t._l(t.ageList,(function(t){return n("el-option",{key:t.value+t.label,attrs:{value:t.label}})})),1)],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程时长"}},[n("el-input",{attrs:{placeholder:"请输入课程时长"},model:{value:t.content.hours,callback:function(e){t.$set(t.content,"hours",t._n(e))},expression:"content.hours"}})],1)],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程类目"}},[n("el-select",{attrs:{placeholder:"请选择课程类目"},on:{change:t.cateChange},model:{value:t.categoryStr,callback:function(e){t.categoryStr=e},expression:"categoryStr"}},t._l(t.categoryValList,(function(t){return n("el-option",{key:t.categoryName+t.categoryId,attrs:{value:t.categoryName}})})),1)],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程标签"}},[n("el-input",{attrs:{placeholder:"请输入标签展示课程优势"},model:{value:t.content.tags,callback:function(e){t.$set(t.content,"tags","string"===typeof e?e.trim():e)},expression:"content.tags"}}),t._v(" "),n("div",{staticClass:"tags-msg"},[t._v("多个标识用半角逗号分隔")])],1)],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"推荐讲师"}},[n("el-select",{attrs:{placeholder:"可选择多个讲师"},on:{change:t.teacherChange},model:{value:t.teacherStr,callback:function(e){t.teacherStr=e},expression:"teacherStr"}},t._l(t.teacherList,(function(t){return n("el-option",{key:t.id,attrs:{value:t.realName}})})),1),t._v(" "),n("el-botton",{staticClass:"add-teacher-btn"},[t._v("新增讲师")])],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"课程大纲"}},[n("el-upload",{attrs:{action:t.uploadFile,"before-upload":t.handlePdfPreview,"on-success":t.handlePdfSuccess,"on-remove":t.handlePdfRemove,limit:1,name:"multipartFile"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),n("div",{staticClass:"upload-tips outline-tip",attrs:{slot:"tip"},slot:"tip"},[t._v("建议上传格式为pdf，以便用户手机下载预览。")])],1)],1)],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:20}},[n("el-form-item",{attrs:{label:"课程介绍"}},[n("Tinymce")],1)],1)],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save("content")}}},[t._v("保存")]),t._v(" "),n("el-button",{on:{click:function(e){return t.save("content")}}},[t._v("取消")])],1)],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},r=[],o=n("7618"),c=(n("7f7f"),n("ac4d"),n("8a81"),n("c5f6"),n("ac6a"),n("9afb")),i=n("cabd"),s=n("0de1"),l=n("39bb"),u=n("c466"),d=n("8256"),f={name:"CourseEdit",components:{PageHead:s["a"],Tinymce:d["a"]},data:function(){return{categoryStr:"",content:{ageInterval:"",beginDate:"",categoryId:"",cover:"",detailPic:"",detailWords:"",enrolment:"",hours:"",introduce:[],name:"",outline:"",price:"",slogans:"",studentStyle:[],tags:"",teachers:[]},title:"新增课程",teacherStr:"",isEdit:!1,courseFormRules:{},teacherArr:[],imageUrl:"",dialogImageUrl:"",dialogVisible:!1,fileList:[],uploadUrl:l["c"],uploadFile:l["b"],isLeaveShow:!1,categoryValList:[],teacherList:[],introduceList:[],studentList:[],ageList:[{value:0,label:"0-3"},{value:1,label:"3-6"},{value:2,label:"6-9"},{value:3,label:"9-12"},{value:4,label:"12-15"},{value:5,label:"15-18"}],ageStr:"",isAdd:!0}},methods:{getView:function(t){var e=this,n={id:t};Object(i["d"])(n).then((function(t){if(t.code)return t.message&&e.$warn(t.message);if(t.data){e.content=t.data,e.content.studentStyle.forEach((function(t){e.studentList.push({url:t})})),e.content.introduce.forEach((function(t){e.introduceList.push({url:t})})),e.content.price=Number(t.data.price),e.content.hours=Number(t.data.hours),e.teacherArr=e.content.teachers,e.categoryStr=e.content.categoryName;var n=!0,a=!1,r=void 0;try{for(var o,c=e.ageList[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var i=o.value;if(Number(e.content.ageInterval)===Number(i.value)){e.ageStr=i.label;break}}}catch(s){a=!0,r=s}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}e.getTeacher()}}))},getgetCategory:function(){var t=this;Object(c["d"])().then((function(e){if(e.code)return e.message&&t.$warn(e.message);e.data&&(t.categoryValList=e.data)}))},goBack:function(){this.$router.go(-1)},handleAvatarSuccess:function(t,e){if(t.code)return t.message&&this.$warn(t.message);t.data&&(this.content.cover=t.data)},handleDetailSuccess:function(t,e){if(t.code)return t.message&&this.$warn(t.message);t.data&&(this.content.detailPic=t.data)},handleIntroduceSuccess:function(t,e){if(t.code)return t.message&&this.$warn(t.message);t.data&&this.content.introduce.push(t.data)},handleStudentSuccess:function(t,e){if(t.code)return t.message&&this.$warn(t.message);t.data&&this.content.studentStyle.push(t.data)},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传头像图片大小不能超过 2MB!"),e},handlePdfSuccess:function(t,e){if(t.code)return t.message&&this.$warn(t.message);t.data&&(this.content.outline=t.data)},handlePdfRemove:function(){this.content.outline=""},handlePdfPreview:function(t){var e="application/pdf"===t.type,n=t.size/1024/1024<200;return e||this.$message.error("上传课程大纲只能是 PDF 格式!"),n||this.$message.error("上传课程大纲大小不能超过 200MB!"),n&&e},handleStudentRemove:function(t,e){if("success"!==t.status)return this.$warn("删除失败");if(t.url){var n=this.content.studentStyle.indexOf(t.url);this.content.studentStyle.splice(n,1)}},handleIntroduceRemove:function(t,e){if("success"!==t.status)return this.$warn("删除失败");if(t.url){var n=this.content.introduce.indexOf(t.url);this.content.introduce.splice(n,1)}},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},delTeacher:function(t,e){this.teacherArr.splice(e,1)},handleExceed:function(t,e){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},beforeRemove:function(t,e){return this.$confirm("确定移除 ".concat(t.name,"？"))},save:function(t){var e=this;this.$refs[t].validate((function(t){if(t){var n=e.content,a=e.isAdd?i["a"]:i["b"];"object"===Object(o["a"])(e.content.beginDate)&&(n.beginDate=Object(u["a"])(e.content.beginDate.getTime(),"YYYY-MM-DD")),n.teachers=[],e.teacherArr.forEach((function(t){n.teachers.push(t.id)})),e.isAdd||(n.status=e.content.status),a(n).then((function(t){if(t.code)return t.message&&e.$warn(t.message);e.$success(t.message),e.$router.push({name:"Course"})}))}}))},cateChange:function(){this.teacherArr=[];var t=!0,e=!1,n=void 0;try{for(var a,r=this.categoryValList[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var o=a.value;if(o.categoryName===this.categoryStr){this.content.categoryId=o.categoryId;break}}}catch(c){e=!0,n=c}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}this.getTeacher()},ageChange:function(){var t=!0,e=!1,n=void 0;try{for(var a,r=this.ageList[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var o=a.value;if(o.label===this.ageStr){this.content.ageInterval=o.value;break}}}catch(c){e=!0,n=c}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}},teacherChange:function(){var t=!0,e=!1,n=void 0;try{for(var a,r=this.teacherArr[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var o=a.value;if(o.realName===this.teacherStr)return this.$warn("请不要重复添加"),void(this.teacherStr="")}}catch(f){e=!0,n=f}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}var c=!0,i=!1,s=void 0;try{for(var l,u=this.teacherList[Symbol.iterator]();!(c=(l=u.next()).done);c=!0){var d=l.value;if(d.realName===this.teacherStr){this.teacherArr.push(d),this.teacherStr="";break}}}catch(f){i=!0,s=f}finally{try{c||null==u.return||u.return()}finally{if(i)throw s}}},getTeacher:function(){var t=this,e={id:this.content.categoryId};Object(c["c"])(e).then((function(e){if(e.code)return e.message&&t.$warn(e.message);e.data&&(t.teacherList=e.data)}))},isNumber:function(t){"number"!==typeof this.content[t]&&this.$warn("必须是数字")}}},h=f,g=(n("8534"),n("2877")),p=Object(g["a"])(h,a,r,!1,null,"a48c60ce",null);e["default"]=p.exports},"5d58":function(t,e,n){t.exports=n("d8d6")},"67bb":function(t,e,n){t.exports=n("f921")},"6b54":function(t,e,n){"use strict";n("3846");var a=n("cb7c"),r=n("0bfb"),o=n("9e1e"),c="toString",i=/./[c],s=function(t){n("2aba")(RegExp.prototype,c,t,!0)};n("79e5")((function(){return"/a/b"!=i.call({source:"a",flags:"b"})}))?s((function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?r.call(t):void 0)})):i.name!=c&&s((function(){return i.call(this)}))},7618:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n("5d58"),r=n.n(a),o=n("67bb"),c=n.n(o);function i(t){return i="function"===typeof c.a&&"symbol"===typeof r.a?function(t){return typeof t}:function(t){return t&&"function"===typeof c.a&&t.constructor===c.a&&t!==c.a.prototype?"symbol":typeof t},i(t)}},8534:function(t,e,n){"use strict";var a=n("3b58"),r=n.n(a);r.a},9744:function(t,e,n){"use strict";var a=n("4588"),r=n("be13");t.exports=function(t){var e=String(r(this)),n="",o=a(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},c466:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("28a5"),n("f576"),n("a481"),n("6b54"),n("7618");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss",n=(new Date).getTime();t||(t=n);while(t.toString().length<13)t+="0";var a=new Date(t);a.getMonth();var r={year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hours:a.getHours(),minutes:a.getMinutes(),seconds:a.getSeconds()};switch(e){case"YYYY-MM-DD hh:mm:ss":return"".concat(r.year,"-").concat(r.month,"-").concat(r.day," ").concat(r.hours,":").concat(r.minutes,":").concat(r.seconds);case"YYYY-MM-DD":return"".concat(r.year,"-").concat(r.month,"-").concat(r.day);case"MM-DD":return"".concat(r.month,"-").concat(r.day);case"hh:mm:ss":return"".concat(r.hours,":").concat(r.minutes,":").concat(r.seconds);case"hh:mm":return"".concat(r.hours,":").concat(r.minutes);case"computed":if(n>t){var o=Math.abs(t-n),c=o/1e3,i=c/60,s=i/60,l=s/24,u=l/7;if(~~u>0&&u<3)return~~u+"周前";if(l<7&&~~l>0)return~~l+"天前";if(~~s>0&&s<24)return~~s+"小时前";if(~~i>0&&i<60)return~~i+"分钟前";if(~~c>0&&c<60)return~~c+"秒前"}else console.log("未来的时间");return"".concat(r.year,"-").concat(r.month,"-").concat(r.day," ").concat(r.hours,":").concat(r.minutes,":").concat(r.seconds)}}},cabd:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return c})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return s}));var a=n("b775");function r(t){return a["a"].post("boss/store/curriculum",t)}function o(t){var e=t.id;return a["a"].get("boss/store/curriculum/"+e)}function c(t){return a["a"].post("boss/store/curriculum4teacher/",t)}function i(t){return a["a"].post("boss/store/distributionTeacher4Student",t)}function s(t){return a["a"].patch("boss/store/curriculum",t)}},f576:function(t,e,n){"use strict";var a=n("5ca1"),r=n("2e08"),o=n("a25f"),c=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);a(a.P+a.F*c,"String",{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!0)}})}}]);