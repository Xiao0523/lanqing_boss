(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9297ad0e"],{"023a":function(t,e,s){"use strict";var a=s("cab2"),i=s.n(a);i.a},"20ee":function(t,e,s){"use strict";var a=s("c9fa"),i=s.n(a);i.a},"27b7":function(t,e,s){"use strict";var a=s("efea"),i=s.n(a);i.a},"2ae9":function(t,e,s){},"2bd0":function(t,e,s){"use strict";var a=s("2ae9"),i=s.n(a);i.a},"456d":function(t,e,s){var a=s("4bf8"),i=s("0d58");s("5eda")("keys",(function(){return function(t){return i(a(t))}}))},4917:function(t,e,s){"use strict";var a=s("cb7c"),i=s("9def"),o=s("0390"),r=s("5f1b");s("214f")("match",1,(function(t,e,s,l){return[function(s){var a=t(this),i=void 0==s?void 0:s[e];return void 0!==i?i.call(s,a):new RegExp(s)[e](String(a))},function(t){var e=l(s,t,this);if(e.done)return e.value;var n=a(t),c=String(this);if(!n.global)return r(n,c);var u=n.unicode;n.lastIndex=0;var d,v=[],f=0;while(null!==(d=r(n,c))){var m=String(d[0]);v[f]=m,""===m&&(n.lastIndex=o(c,i(n.lastIndex),u)),f++}return 0===f?null:v}]}))},"4c6b":function(t,e,s){},"57bd":function(t,e,s){t.exports=s.p+"static/img/warn.1078b6f2.png"},"5eda":function(t,e,s){var a=s("5ca1"),i=s("8378"),o=s("79e5");t.exports=function(t,e){var s=(i.Object||{})[t]||Object[t],r={};r[t]=e(s),a(a.S+a.F*o((function(){s(1)})),"Object",r)}},"607e":function(t,e,s){"use strict";var a=s("4c6b"),i=s.n(a);i.a},"7c22":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"container"},[a("div",{staticClass:"content"},[a("el-tabs",{model:{value:t.tabNames,callback:function(e){t.tabNames=e},expression:"tabNames"}},[a("el-tab-pane",{attrs:{name:"auth"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("店铺认证")]),t._v(" "),-1==t.authStatus||1==t.authStatus?a("div",{staticClass:"auth"},[a("h3",{staticClass:"title"},[t._v("认证状态"),a("span",{class:{red:-1==t.authStatus}},[t._v(t._s(t._f("authStr")(t.authStatus)))])]),t._v(" "),a("auth-input",{directives:[{name:"show",rawName:"v-show",value:-1==t.authStatus,expression:"authStatus == -1"}],attrs:{list:t.authList},on:{authOK:t.resetStatus}}),t._v(" "),a("auth-detail",{directives:[{name:"show",rawName:"v-show",value:1==t.authStatus,expression:"authStatus == 1"}],attrs:{list:t.authList}})],1):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.authStatus||2==t.authStatus,expression:"authStatus == 0 || authStatus == 2"}],staticClass:"result"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.authStatus,expression:"authStatus == 0"}]},[a("h4",{staticClass:"title"},[t._v("认证中")]),t._v(" "),a("div",{staticClass:"result-img-wraper"},[a("img",{staticClass:"result-img",attrs:{src:s("c869"),alt:""}})]),t._v(" "),a("p",{staticClass:"result-text"},[t._v("工作人员会在48小时内完成审核")]),t._v(" "),a("p",{staticClass:"result-text"},[t._v("请耐心等待")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.authStatus,expression:"authStatus == 2"}]},[a("div",{staticClass:"result-img-wraper",staticStyle:{"margin-top":"50px"}},[a("img",{staticClass:"result-img",attrs:{src:s("57bd"),alt:""}})]),t._v(" "),a("p",{staticClass:"result-text"},[t._v("审核失败")]),t._v(" "),a("p",{staticClass:"result-text"},[t._v("失败原因是："+t._s(t.logInfo))]),t._v(" "),a("el-button",{staticClass:"result-btn",attrs:{type:"primary"},on:{click:t.resetPost}},[t._v("重新提交审核")])],1)])]),t._v(" "),a("el-tab-pane",{attrs:{name:"store"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("店铺上架")]),t._v(" "),1===t.authStatus?a("div",[0==t.storeStatus||1==t.storeStatus||6==t.storeStatus||""==t.storeStatus?a("div",{staticClass:"auth"},[a("div",{staticClass:"tabels"},[a("h3",{staticClass:"title"},[t._v("上架状态"),a("span",{class:{red:0==t.storeStatus||6==t.storeStatus||""==t.storeStatus}},[t._v(t._s(t._f("storeStr")(t.storeStatus)))])]),t._v(" "),1==t.storeStatus?a("div",{staticClass:"storeBtn",on:{click:t.storeBtns}},[t._v("申请下架")]):t._e(),t._v(" "),6==t.storeStatus?a("div",{staticClass:"storeBtn",on:{click:t.resetStorePost}},[t._v("申请上架")]):t._e()]),t._v(" "),0==t.storeStatus||""==t.storeStatus?a("store-input",{attrs:{list:t.storeList},on:{listOk:t.resetStore}}):t._e(),t._v(" "),1==t.storeStatus||6==t.storeStatus?a("store-detail",{attrs:{list:t.storeList}}):t._e()],1):2==t.storeStatus||3==t.storeStatus||4==t.storeStatus||5==t.storeStatus?a("div",{staticClass:"result"},[2==t.storeStatus||4==t.storeStatus?a("div",[a("h4",{staticClass:"title"},[t._v(t._s(t._f("storeStrs")(t.storeStatus)))]),t._v(" "),a("div",{staticClass:"result-img-wraper"},[a("img",{staticClass:"result-img",attrs:{src:s("c869"),alt:""}})]),t._v(" "),a("p",{staticClass:"result-text"},[t._v("工作人员会在48小时内完成审核")]),t._v(" "),a("p",{staticClass:"result-text"},[t._v("请耐心等待")])]):t._e(),t._v(" "),3==t.storeStatus||5==t.storeStatus?a("div",[a("div",{staticClass:"result-img-wraper",staticStyle:{"margin-top":"50px"}},[a("img",{staticClass:"result-img",attrs:{src:s("57bd"),alt:""}})]),t._v(" "),a("p",{staticClass:"result-text"},[t._v("审核失败")]),t._v(" "),a("p",{staticClass:"result-text"},[t._v("失败原因是："+t._s(t.logInfo))]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:3==t.storeStatus,expression:"storeStatus == 3"}],staticClass:"result-btn",attrs:{type:"primary"},on:{click:t.resetStorePost}},[t._v("重新提交上架")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:5==t.storeStatus,expression:"storeStatus == 5"}],staticClass:"result-btn",attrs:{type:"primary"},on:{click:t.resetGo}},[t._v("重新提交下架")])],1):t._e()]):t._e()]):a("div",{staticClass:"no-store-box"},[a("img",{attrs:{src:s("c2ff"),alt:""}}),t._v(" "),a("span",[t._v("完成店铺认证后，可操作店铺上架")]),t._v(" "),a("el-button",{staticClass:"btns",on:{click:t.goAuth}},[t._v("去认证")])],1)])],1)],1)])},i=[],o=(s("c5f6"),s("2b6d")),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-form",{ref:"authList",staticClass:"content",attrs:{model:t.authList,"label-width":"7em"}},[s("el-row",[s("el-col",{attrs:{span:24}},[s("span",{staticClass:"line-tip"},[t._v("店铺基本信息")])])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"店铺名称"}},[s("el-input",{attrs:{placeholder:"请输入店铺名称"},model:{value:t.authList.name,callback:function(e){t.$set(t.authList,"name",e)},expression:"authList.name"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"统一信用代码"}},[s("el-input",{attrs:{placeholder:"请输入统一信用代码"},model:{value:t.authList.unifiedCreditCode,callback:function(e){t.$set(t.authList,"unifiedCreditCode",e)},expression:"authList.unifiedCreditCode"}})],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"法人姓名"}},[s("el-input",{attrs:{placeholder:"请输入法人姓名"},model:{value:t.authList.legalPersonName,callback:function(e){t.$set(t.authList,"legalPersonName",e)},expression:"authList.legalPersonName"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"法人身份证号"}},[s("el-input",{attrs:{placeholder:"请输入法人身份证号"},model:{value:t.authList.legalPersonCardId,callback:function(e){t.$set(t.authList,"legalPersonCardId",e)},expression:"authList.legalPersonCardId"}})],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"银行卡号"}},[s("el-input",{attrs:{placeholder:"请输入银行卡号"},model:{value:t.authList.bankNo,callback:function(e){t.$set(t.authList,"bankNo",e)},expression:"authList.bankNo"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"银行名称"}},[s("el-input",{attrs:{placeholder:"请输入银行名称"},model:{value:t.authList.bankName,callback:function(e){t.$set(t.authList,"bankName",e)},expression:"authList.bankName"}})],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("span",{staticClass:"line-tip"},[t._v("店铺证件信息")])])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"工商营业执照"}},[s("el-upload",{staticClass:"uploader",attrs:{action:t.uploadUrl,name:"multipartFile","show-file-list":!1,"on-success":t.handleBusinessSuccess,"before-upload":t.beforeAvatarUpload}},[t.authList.businessLicense?s("img",{staticClass:"avatar",attrs:{src:t.authList.businessLicense}}):s("i",{staticClass:"el-icon-picture uploader-icon"})]),t._v(" "),s("p",{staticClass:"upload-tips"},[t._v("5M以内，JPG/PNG格式的图片，请勿提供虚假证件")]),t._v(" "),s("input",{attrs:{type:"hidden"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"办学许可证"}},[s("el-upload",{staticClass:"uploader",attrs:{action:t.uploadUrl,name:"multipartFile","show-file-list":!1,"on-success":t.handleSchoolSuccess,"before-upload":t.beforeAvatarUpload}},[t.authList.schoolLicense?s("img",{staticClass:"avatar",attrs:{src:t.authList.schoolLicense}}):s("i",{staticClass:"el-icon-picture uploader-icon"})]),t._v(" "),s("p",{staticClass:"upload-tips"},[t._v("5M以内，JPG/PNG格式的图片，请勿提供虚假证件")]),t._v(" "),s("input",{attrs:{type:"hidden"}})],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("span",{staticClass:"line-tip"},[t._v("协议文档")])])],1),t._v(" "),s("el-row",[s("el-col",{staticClass:"doc",attrs:{span:24}},[s("el-checkbox",{staticClass:"checked",model:{value:t.readed,callback:function(e){t.readed=e},expression:"readed"}}),t._v("我已阅读"),s("router-link",{staticClass:"doc-link",attrs:{tag:"a",target:"_blank",to:{name:"Treaty"}}},[t._v("《蓝青合作协议》")])],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"submit",on:{click:t.getStoreAdd}},[t._v("提交认证")])],1)],1)],1)},l=[],n=s("39bb"),c={name:"AuthInput",props:{list:{type:Object,default:function(){return{}}}},data:function(){return{authList:{name:"",bankName:"",bankNo:"",businessLicense:"",legalPersonCardId:"",legalPersonName:"",schoolLicense:"",storeId:"",unifiedCreditCode:""},readed:!0,uploadUrl:n["c"]}},watch:{list:{handler:function(t){this.authList=this.list},deep:!0,immediate:!0}},mounted:function(){this.list.length&&(this.authList=this.list)},methods:{getStoreAdd:function(){var t=this;if(!this.readed)return this.$warn("请先勾选合作协议");var e=this.authList;Object(o["c"])(e).then((function(e){if(e.code)return t.$warn(e.message);t.$success(e.message),t.$emit("authOK")}))},handleBusinessSuccess:function(t,e){if(t.code)return t.message&this.$warn(t.message);t.data&&(this.authList.businessLicense=t.data)},handleSchoolSuccess:function(t,e){if(t.code)return t.message&this.$warn(t.message);t.data&&(this.authList.schoolLicense=t.data)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type;return e||this.$message.error("请上传JPG/PNG格式的图片"),e},handleRemove:function(t,e){if("success"!==t.status)return this.$warn("删除失败");if(t.url){var s=this.content.achievements.indexOf(t.url);this.content.achievements.splice(s,1)}}}},u=c,d=(s("607e"),s("2877")),v=Object(d["a"])(u,r,l,!1,null,"02ea2a9e",null),f=v.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content-detail"},[s("div",{staticClass:"cell"},[s("span",{staticClass:"cell-hd"},[t._v("店铺名称")]),t._v(t._s(t.authList.name))]),t._v(" "),s("div",{staticClass:"cell"},[s("span",{staticClass:"cell-hd"},[t._v("统一信用代码")]),t._v(t._s(t.authList.unifiedCreditCode))]),t._v(" "),s("div",{staticClass:"cell"},[s("span",{staticClass:"cell-hd"},[t._v("法人姓名")]),t._v(t._s(t.authList.legalPersonName))]),t._v(" "),s("div",{staticClass:"cell"},[s("span",{staticClass:"cell-hd"},[t._v("法人身份证号")]),t._v(t._s(t.authList.legalPersonCardId))]),t._v(" "),s("div",{staticClass:"cell"},[s("span",{staticClass:"cell-hd"},[t._v("银行卡号")]),t._v(t._s(t.authList.bankNo))]),t._v(" "),s("div",{staticClass:"cell"},[s("span",{staticClass:"cell-hd"},[t._v("银行名称")]),t._v(t._s(t.authList.bankName))]),t._v(" "),s("div",{staticClass:"cell"},[s("span",{staticClass:"cell-hd"},[t._v("工商营业执照")]),s("img",{staticClass:"thumbnail",attrs:{src:t.authList.businessLicense,alt:"上传工商执照"}})]),t._v(" "),s("div",{staticClass:"cell"},[s("span",{staticClass:"cell-hd"},[t._v("办学许可证")]),s("img",{staticClass:"thumbnail",attrs:{src:t.authList.schoolLicense,alt:"办学许可证",srcset:""}})])])},p=[],h={name:"AuthResult",props:{list:{type:Object,default:function(){return{}}}},data:function(){return{authList:{name:"",bankName:"",bankNo:"",businessLicense:"",legalPersonCardId:"",legalPersonName:"",schoolLicense:"",storeId:"",unifiedCreditCode:""}}},watch:{list:{handler:function(t){this.authList=this.list},deep:!0}},mounted:function(){this.authList=this.list}},_=h,C=(s("27b7"),Object(d["a"])(_,m,p,!1,null,"27a919c2",null)),b=C.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-form",{ref:"form",staticClass:"content",attrs:{model:t.form,"label-width":"7em"}},[s("el-row",[s("el-col",{attrs:{span:24}},[s("span",{staticClass:"line-tip"},[t._v("店铺信息")])])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"店铺logo"}},[s("el-upload",{staticClass:"uploader logo",attrs:{action:t.uploadUrl,name:"multipartFile","show-file-list":!1,"on-success":t.handleLogoSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.logo?s("img",{staticClass:"logo",attrs:{src:t.form.logo}}):s("i",{staticClass:"el-icon-picture uploader-icon"})]),t._v(" "),s("p",{staticClass:"upload-tips"},[t._v("只能上传jpg/png文件，建议尺寸为500x500px。")]),t._v(" "),s("input",{attrs:{type:"hidden"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"店铺封面"}},[s("el-upload",{attrs:{action:t.uploadUrl,name:"multipartFile","list-type":"picture-card","file-list":t.CoverImgList,limit:9,"on-preview":t.handlePicturePreview,"before-upload":t.beforeAvatarUpload,"on-remove":t.handleCoversRemove,"on-success":t.handlePicctureCoversSuccess}},[s("i",{staticClass:"el-icon-plus"})]),t._v(" "),s("p",{staticClass:"upload-tips"},[t._v("只能上传jpg/png文件，且最多上传9张，建议尺寸为750x560px。")])],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"视频封面"}},[s("el-upload",{staticClass:"uploader logo",attrs:{action:t.uploadUrl,name:"multipartFile","show-file-list":!1,"on-success":t.handleVideoSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.videoInfo.videoCoverUrl?s("img",{staticClass:"logo",attrs:{src:t.form.videoInfo.videoCoverUrl}}):s("i",{staticClass:"el-icon-picture uploader-icon"})]),t._v(" "),s("p",{staticClass:"upload-tips"},[t._v("只能上传jpg/png文件，建议尺寸为500x500px。")]),t._v(" "),s("input",{attrs:{type:"hidden"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"背景视频"}},[s("div",{staticClass:"upload-box"},[s("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"input",attrs:{type:"file",accept:"video/*"},on:{change:t.fileChange}}),t._v(" "),s("el-button",{attrs:{disabled:t.disableUpload,size:"small",type:"primary"},on:{click:function(e){return t.$refs.input.click()}}},[t._v("\n            上传视频\n          ")]),t._v(" "),s("el-progress",{directives:[{name:"show",rawName:"v-show",value:t.percentage,expression:"percentage"}],staticClass:"progress",attrs:{percentage:t.percentage,"stroke-width":26,"text-inside":!0,color:t.customColors}})],1),t._v(" "),s("p",{staticClass:"upload-tips"},[t._v("视频只能上传一个。")]),t._v(" "),s("input",{attrs:{type:"hidden"}})])],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"营业时间"}},[s("el-input",{attrs:{placeholder:"请输入营业时间"},model:{value:t.form.businessHours,callback:function(e){t.$set(t.form,"businessHours",e)},expression:"form.businessHours"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"成立时间"}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",clearable:!1,"value-format":"yyyy-MM-dd"},model:{value:t.form.establishmentDate,callback:function(e){t.$set(t.form,"establishmentDate",e)},expression:"form.establishmentDate"}})],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"联系人"}},[s("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:t.form.contactName,callback:function(e){t.$set(t.form,"contactName",e)},expression:"form.contactName"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"联系电话"}},[s("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:t.form.contactPhone,callback:function(e){t.$set(t.form,"contactPhone",e)},expression:"form.contactPhone"}})],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"讲师数"}},[s("el-input",{attrs:{placeholder:"请输入讲师数"},model:{value:t.form.teacherAmount,callback:function(e){t.$set(t.form,"teacherAmount",e)},expression:"form.teacherAmount"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"累计学员"}},[s("el-input",{attrs:{placeholder:"请输入累计学员区间，如200-300"},model:{value:t.form.studentAmount,callback:function(e){t.$set(t.form,"studentAmount",e)},expression:"form.studentAmount"}})],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"课程数"}},[s("el-input",{attrs:{placeholder:"请输入课程数"},model:{value:t.form.curriculumAmount,callback:function(e){t.$set(t.form,"curriculumAmount",e)},expression:"form.curriculumAmount"}})],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"店铺标语"}},[s("el-input",{attrs:{placeholder:"请以简洁的语言突出店铺优势"},model:{value:t.form.selfDescription,callback:function(e){t.$set(t.form,"selfDescription",e)},expression:"form.selfDescription"}})],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"店铺地址"}},[s("div",{staticClass:"address"},[s("el-row",[s("el-select",{staticClass:"select",attrs:{placeholder:"请选择"},on:{change:function(e){return t.getSonList("province")}},model:{value:t.form.provinceName,callback:function(e){t.$set(t.form,"provinceName",e)},expression:"form.provinceName"}},t._l(t.cityList.province,(function(t){return s("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1),t._v(" "),s("el-select",{staticClass:"select",attrs:{placeholder:"请选择"},on:{change:function(e){return t.getSonList("city")}},model:{value:t.form.cityName,callback:function(e){t.$set(t.form,"cityName",e)},expression:"form.cityName"}},t._l(t.cityList.city,(function(t){return s("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1),t._v(" "),s("el-select",{staticClass:"select",attrs:{placeholder:"请选择"},on:{change:function(e){return t.getSonList("district")}},model:{value:t.form.districtName,callback:function(e){t.$set(t.form,"districtName",e)},expression:"form.districtName"}},t._l(t.cityList.district,(function(t){return s("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1),t._v(" "),s("el-select",{staticClass:"select",attrs:{placeholder:"请选择"},on:{change:function(e){return t.getSonList("street")}},model:{value:t.form.streetName,callback:function(e){t.$set(t.form,"streetName",e)},expression:"form.streetName"}},t._l(t.cityList.street,(function(t){return s("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1)],1),t._v(" "),s("el-input",{staticClass:"input",attrs:{type:"textarea",placeholder:"输入详细地址"},model:{value:t.form.businessAddress,callback:function(e){t.$set(t.form,"businessAddress",e)},expression:"form.businessAddress"}})],1)])],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"店铺介绍"}},[s("Tinymce",{model:{value:t.form.introduce,callback:function(e){t.$set(t.form,"introduce",e)},expression:"form.introduce"}})],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"submit",on:{click:t.getStoreAdd}},[t._v("提交上架")])],1)],1)],1)},S=[],y=(s("7f7f"),s("4917"),s("ac4d"),s("8a81"),s("ac6a"),s("b775"));function L(t){var e=t.province,s=t.city,a=t.district,i=1,o=i+"/";return e&&(i=2,o=i+"/"+e+"/"),e&&s&&(i=3,o=i+"/"+s+"/"),e&&s&&a&&(i=4,o=i+"/"+a),y["a"].get("ChinaCity/"+o)}var x=s("8256");function w(t){var e=t.uuid;return y["a"].get("/VodStsForApp/"+e)}var k={name:"AuthInput",components:{Tinymce:x["a"]},props:{list:{type:Object,default:function(){return{}}}},data:function(){return{form:{logo:"",covers:[],videoInfo:{videoCoverUrl:"",videoUrl:""},businessHours:"",establishmentDate:"",contactName:"",contactPhone:"",teacherAmount:"",studentAmount:"",curriculumAmount:"",selfDescription:"",introduce:"",provinceCode:"",provinceName:"",cityCode:"",cityName:"",districtCode:"",districtName:"",streetCode:"",streetName:""},chinaCity:{province:"",city:"",district:""},securityToken:"",accessKeyId:"",accessKeySecret:"",disableUpload:!1,disableSubmit:!0,uploadFile:null,uploader:null,callback:null,percentage:0,cityList:{province:[],city:[],district:[],street:[]},videoUrl:n["d"],uploadUrl:n["c"],videoLoading:!1,customColors:[{color:"#409eff",percentage:20},{color:"#409eff",percentage:40},{color:"#409eff",percentage:60},{color:"#409eff",percentage:80},{color:"#409eff",percentage:100}],CoverImgList:[]}},watch:{list:{handler:function(t,e){if(this.form=e||t,!e||e&&JSON.stringify(e.covers)!==JSON.stringify(t.covers)){this.covers=[];var s=!0,a=!1,i=void 0;try{for(var o,r=this.form.covers[Symbol.iterator]();!(s=(o=r.next()).done);s=!0){var l=o.value;this.CoverImgList.push({url:l})}}catch(c){a=!0,i=c}finally{try{s||null==r.return||r.return()}finally{if(a)throw i}}}if(this.form.districtCode=this.form.areaCode||this.form.districtCode,console.log(e&&!(t.areaCode===e.areaCode)),this.form.districtCode&&(!e||t.areaCode!==e.areaCode))for(var n in this.getCityList(),this.chinaCity)this.chinaCity[n]=this.form[n+"Code"],this.getCityList()},deep:!0,immediate:!0}},mounted:function(){this.getCityList()},methods:{fileChange:function(){var t=this;return!!event.target.files[0]&&(event.target.files[0].type.match("video.*")?(this.uploadFile=event.target.files[0],this.percentage=0,void(this.uploadFile.size<=10485760?this.getAuth((function(){t.getUploder();var e='{"Vod":{"StorageLocation":"","Title":"'+t.uploadFile.name+'","Description":"默认描述信息暂无","CateId":"19","Tags":"测试视频"}}';t.uploader.addFile(t.uploadFile,"","","",e),t.uploader.startUpload(),t.disableSubmit=!1})):(this.disableSubmit=!0,this.$message.error("上传的文件大小超过10M，请重新上传")))):(this.$message.error("请选择视频文件"),!1))},getAuth:function(t){var e=this,s={uuid:JSON.parse(localStorage.getItem("storeId"))};w(s).then((function(s){e.securityToken=s.credentials.securityToken,e.accessKeyId=s.credentials.accessKeyId,e.accessKeySecret=s.credentials.accessKeySecret,t()}))},getUploder:function(){var t=this;t.uploader=new AliyunUpload.Vod({userId:"1402947514567452",partSize:1048576,parallel:5,retryCount:3,retryDuration:2,enableUploadProgress:!0,onUploadFailed:function(e,s,a){t.$message.error("文件上传失败：".concat(a)),t.disableSubmit=!0,t.disableUpload=!1},onUploadSucceed:function(e){console.log(e),t.form.videoInfo.videoUrl="https://video.my51share.com/".concat(e.object),console.log(t.form.videoInfo),t.$message.success("文件上传成功"),t.disableSubmit=!0,t.disableUpload=!1},onUploadProgress:function(e,s,a){t.percentage=+(100*a).toFixed(0)},onUploadTokenExpired:function(t){console.log("onUploadTokenExpired STS临时账号过期了")},onUploadCanceled:function(t){console.log("onUploadCanceled:file:".concat(t.file.name))},onUploadstarted:function(e){var s=t.accessKeyId,a=t.accessKeySecret,i=t.securityToken;t.uploader.setSTSToken(e,s,a,i)},onUploadEnd:function(t){console.log("onUploadEnd: uploaded all the files")}})},getCityList:function(){var t=this;L(this.chinaCity).then((function(e){if(e.code)return e.message&&t.$warn(e.message);if(e.data){var s=e.data,a=s[0].level;if(t.cityList[a]=s,t.form[a+"Code"]){var i=!0,o=!1,r=void 0;try{for(var l,n=s[Symbol.iterator]();!(i=(l=n.next()).done);i=!0){var c=l.value;if(t.form[a+"Code"]===c.adcode){if("street"===a)return;return void(t.form[a+"Name"]=c.name)}}}catch(u){o=!0,r=u}finally{try{i||null==n.return||n.return()}finally{if(o)throw r}}}}})).catch((function(t){console.log(t)}))},getSonList:function(t){switch(t){case"province":this.form.cityCode="",this.form.cityName="",this.chinaCity.province="",this.chinaCity.city="",this.cityList.city=[];case"city":this.form.districtCode="",this.form.districtName="",this.chinaCity.district="",this.cityList.district=[];case"district":this.form.streetCode="",this.form.streetName="",this.cityList.street=[];break;default:break}var e=this.form[t+"Name"],s=!0,a=!1,i=void 0;try{for(var o,r=this.cityList[t][Symbol.iterator]();!(s=(o=r.next()).done);s=!0){var l=o.value;if(l.name===e){this.form[t+"Code"]=l.adcode,this.chinaCity[t]=l.adcode;break}}}catch(n){a=!0,i=n}finally{try{s||null==r.return||r.return()}finally{if(a)throw i}}"street"!==t&&this.getCityList()},getStoreAdd:function(){var t=this;if(!this.form.covers.length&&!this.form.videoInfo.videoUrl)return this.$warn("店铺视频或店铺封面必须上传其中之一！！！");var e=this.form;e.businessAddressSystem=e.provinceName+e.cityName+e.districtName+e.streetName+e.businessAddress,e.areaCode=e.districtCode,Object(o["d"])(e).then((function(e){if(e.code)return t.$warn(e.message);t.$success(e.message),t.$emit("listOk")}))},handleLogoSuccess:function(t,e){if(t.code)return t.message&this.$warn(t.message);t.data&&(this.form.logo=t.data)},handleCoversRemove:function(t,e){if("success"===t.status&&t.url){var s=this.form.covers.indexOf(t.url);this.form.covers.splice(s,1)}},handleSchoolSuccess:function(t,e){if(t.code)return t.message&this.$warn(t.message);t.data&&(this.form.covers=t.data)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type;return e||this.$message.error("请上传JPG/PNG格式的图片"),e},handleVideoSuccess:function(t,e){if(t.code)return t.message&&this.$warn(t.message);this.$success("上传成功！！！"),this.form.videoInfo.videoCoverUrl=t.data},handleVideoRemove:function(){this.videoLoading=!1,this.form.videoInfo.videoCoverUrl="",this.form.videoInfo.videoUrl=""},showMock:function(){this.videoLoading=!0},handlePicturePreview:function(t){this.previewImg=t.url,this.dialogVisible=!0},handlePicctureCoversSuccess:function(t,e){if(t.code)return t.message&&this.$warn(t.message);t.data&&(console.log("执行了"),this.form.covers.push(t.data))}}},N=k,I=(s("023a"),Object(d["a"])(N,g,S,!1,null,"51cd83a8",null)),$=I.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"content-detail"},[s("div",{staticClass:"panel"},[s("div",{staticClass:"panel__bd"},[s("div",[s("div",{staticClass:"flex"},[s("div",{staticClass:"flex__hd"},[t._v("店铺logo")]),t._v(" "),s("div",{staticClass:"flex__bd"},[s("img",{directives:[{name:"show",rawName:"v-show",value:t.storeList.logo,expression:"storeList.logo"}],staticClass:"avatar",attrs:{src:t.storeList.logo}})])]),t._v(" "),s("div",{staticClass:"flex"},[s("div",{staticClass:"flex__hd"},[t._v("店铺名称")]),t._v(" "),s("div",{staticClass:"flex__bd"},[s("strong",[t._v(t._s(t.storeList.name))])])]),t._v(" "),s("div",{staticClass:"flex"},[s("div",{staticClass:"flex__hd"},[t._v("成立时间")]),t._v(" "),s("div",{staticClass:"flex__bd"},[s("strong",[t._v(t._s(t.storeList.establishmentDate))])])]),t._v(" "),s("div",{staticClass:"flex"},[s("div",{staticClass:"flex__hd"},[t._v("店铺标语")]),t._v(" "),s("div",{staticClass:"flex__bd"},[s("strong",[t._v(t._s(t.storeList.selfDescription))])])]),t._v(" "),s("div",{staticClass:"flex"},[s("div",{staticClass:"flex__hd"},[t._v("店铺地址")]),t._v(" "),s("div",{staticClass:"flex__bd"},[s("strong",[t._v(t._s(t.storeList.businessAddressSystem))])])]),t._v(" "),s("div",{staticClass:"flex"},[s("div",{staticClass:"flex__hd"},[t._v("营业时间")]),t._v(" "),s("div",{staticClass:"flex__bd"},[s("strong",[t._v(t._s(t.storeList.businessHours))])])]),t._v(" "),s("div",{staticClass:"flex"},[s("div",{staticClass:"flex__hd"},[t._v("联系人")]),t._v(" "),s("div",{staticClass:"flex__bd"},[s("strong",[t._v(t._s(t.storeList.contactName))])])]),t._v(" "),s("div",{staticClass:"flex"},[s("div",{staticClass:"flex__hd"},[t._v("联系电话")]),t._v(" "),s("div",{staticClass:"flex__bd"},[s("strong",[t._v(t._s(t.storeList.contactPhone))])])]),t._v(" "),s("div",{staticClass:"flex"},[s("div",{staticClass:"flex__hd"},[t._v("店铺介绍")]),t._v(" "),s("div",{staticClass:"flex__bd"},[s("strong",{domProps:{innerHTML:t._s(t.storeList.introduce)}})])]),t._v(" "),s("div",{staticClass:"flex"},[s("div",{staticClass:"flex__hd"},[t._v("店铺视频")]),t._v(" "),s("div",{staticClass:"flex__bd"},[t.storeList.videoInfo&&t.storeList.videoInfo.videoCoverUrl&&t.storeList.videoInfo.videoUrl?s("ul",{staticClass:"list"},[t.storeList.videoInfo.videoCoverUrl&&t.storeList.videoInfo.videoUrl?s("li",{staticClass:"video-img",on:{click:t.handleVideo}},[s("img",{staticClass:"list-img",attrs:{src:t.storeList.videoInfo.videoCoverUrl,alt:""}})]):t._e()]):t._e()])]),t._v(" "),s("div",{staticClass:"flex"},[s("div",{staticClass:"flex__hd"},[t._v("店铺封面")]),t._v(" "),s("div",{staticClass:"flex__bd"},[s("ul",{directives:[{name:"show",rawName:"v-show",value:t.storeList.covers,expression:"storeList.covers"}],staticClass:"list"},t._l(t.storeList.covers,(function(t,e){return s("li",{key:t+e},[s("img",{staticClass:"list-img",attrs:{src:t,alt:""}})])})),0)])])])])])]),t._v(" "),t.videoFlag?s("div",{staticClass:"video-mack",on:{click:t.closeMack}},[s("video",{staticStyle:{"object-fit":"fill"},attrs:{id:"video",src:t.storeList.videoInfo&&t.storeList.videoInfo.videoUrl,poster:t.storeList.videoInfo&&t.storeList.videoInfo.videoCoverUrl,controls:"",preload:"auto","webkit-playsinline":"true",playsinline:"true","x-webkit-airplay":"allow","x5-video-player-type":"h5","x5-video-player-fullscreen":"false","x5-video-orientation":"portraint"}})]):t._e()])},A=[],P={name:"StoreDetail",props:{list:{type:Object,default:function(){return{}}}},data:function(){return{videoFlag:!1,storeList:{}}},watch:{list:{handler:function(t){this.storeList=this.list},deep:!0}},mounted:function(){this.storeList=this.list},methods:{handleVideo:function(){this.videoFlag=!0},closeMack:function(){this.videoFlag=!1,video.pause()}}},O=P,j=(s("2bd0"),Object(d["a"])(O,U,A,!1,null,"0f1c7755",null)),F=j.exports,D={name:"Home",components:{AuthInput:f,AuthDetail:b,StoreInput:$,StoreDetail:F},filters:{authStr:function(t){return-1===t?"未认证":"已认证"},storeStr:function(t){return 0===t?"未上架":1===t?"已上架":"已下架"},storeStrs:function(t){return 2===t?"上架中":"下架中"},storeBtn:function(t){return 1===t?"申请下架":"申请上架"}},data:function(){return{authList:{},authStatus:null,lastDate:"",logInfo:"",storeStatus:null,storeLogInfo:"",storeList:{},tabNames:"auth"}},mounted:function(){this.getBusiness()},methods:{goAuth:function(){this.tabNames="auth"},getBusiness:function(){var t=this;Object(o["a"])().then((function(e){if(e.code)return t.$warn(e.message);t.authStatus=e.data.status,t.authList=e.data,t.logInfo=e.data.logInfo,e.data.status&&-1!==Number(e.data.status)&&t.getStores()}))},getStores:function(){var t=this;Object(o["b"])().then((function(e){if(e.code)return t.$warn(e.message);t.storeStatus=e.data.status,t.storeList=e.data,t.storeLogInfo=e.data.logInfo||""}))},resetStatus:function(){this.getBusiness()},resetStore:function(){this.getStores()},resetPost:function(){this.authStatus=-1},resetStorePost:function(){this.storeStatus=0},storeBtns:function(){var t=this;Object(o["e"])().then((function(e){if(e.code)return e.message&&t.$warn(e.message);t.$success("申请成功"),t.getStores()}))},resetGo:function(){var t=this;Object(o["f"])().then((function(e){if(e.code)return e.message&&t.$warn(e.message);t.getStores()}))}}},T=D,B=(s("20ee"),Object(d["a"])(T,a,i,!1,null,"6650e4c0",null));e["default"]=B.exports},c2ff:function(t,e,s){t.exports=s.p+"static/img/no-store.0a9e0ec2.png"},c869:function(t,e,s){t.exports=s.p+"static/img/wite.583546e2.png"},c9fa:function(t,e,s){},cab2:function(t,e,s){},efea:function(t,e,s){}}]);