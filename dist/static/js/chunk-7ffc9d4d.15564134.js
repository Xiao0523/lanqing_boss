(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ffc9d4d"],{1169:function(e,t,r){var i=r("2d95");e.exports=Array.isArray||function(e){return"Array"==i(e)}},"11e9":function(e,t,r){var i=r("52a7"),n=r("4630"),s=r("6821"),o=r("6a99"),a=r("69a8"),c=r("c69a"),u=Object.getOwnPropertyDescriptor;t.f=r("9e1e")?u:function(e,t){if(e=s(e),t=o(t,!0),c)try{return u(e,t)}catch(r){}if(a(e,t))return n(!i.f.call(e,t),e[t])}},"37c8":function(e,t,r){t.f=r("2b4c")},"3a72":function(e,t,r){var i=r("7726"),n=r("8378"),s=r("2d00"),o=r("37c8"),a=r("86cc").f;e.exports=function(e){var t=n.Symbol||(n.Symbol=s?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:o.f(e)})}},"3d00":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"container"},[r("el-form",{ref:"submitForm",staticClass:"submitForm",attrs:{"label-width":"10em",model:e.form,rules:e.rules,"hide-required-asterisk":!0}},[r("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"联系人",prop:"contactName"}},[r("el-input",{model:{value:e.form.contactName,callback:function(t){e.$set(e.form,"contactName",t)},expression:"form.contactName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"联系电话",prop:"contactPhone"}},[r("el-input",{model:{value:e.form.contactPhone,callback:function(t){e.$set(e.form,"contactPhone",t)},expression:"form.contactPhone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"店铺地址"}},[r("div",{staticClass:"address"},[r("el-select",{staticClass:"select",attrs:{placeholder:"请选择"},on:{change:function(t){return e.getSonList("province")}},model:{value:e.form.provinceName,callback:function(t){e.$set(e.form,"provinceName",t)},expression:"form.provinceName"}},e._l(e.cityList.province,(function(e){return r("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1),e._v(" "),r("el-select",{staticClass:"select",attrs:{placeholder:"请选择"},on:{change:function(t){return e.getSonList("city")}},model:{value:e.form.cityName,callback:function(t){e.$set(e.form,"cityName",t)},expression:"form.cityName"}},e._l(e.cityList.city,(function(e){return r("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1),e._v(" "),r("el-select",{staticClass:"select",attrs:{placeholder:"请选择"},on:{change:function(t){return e.getSonList("district")}},model:{value:e.form.districtName,callback:function(t){e.$set(e.form,"districtName",t)},expression:"form.districtName"}},e._l(e.cityList.district,(function(e){return r("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1),e._v(" "),r("el-select",{staticClass:"select",attrs:{placeholder:"请选择"},on:{change:function(t){return e.getSonList("street")}},model:{value:e.form.streetName,callback:function(t){e.$set(e.form,"streetName",t)},expression:"form.streetName"}},e._l(e.cityList.street,(function(e){return r("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1),e._v(" "),r("el-input",{staticClass:"input",model:{value:e.form.businessAddress,callback:function(t){e.$set(e.form,"businessAddress",t)},expression:"form.businessAddress"}})],1)]),e._v(" "),r("el-form-item",{attrs:{label:"店铺封面"}},[r("el-upload",{attrs:{action:e.uploadUrl,name:"multipartFile","list-type":"picture-card","file-list":e.CoverImgList,"on-preview":e.handlePicturePreview,"before-upload":e.beforeAvatarUpload,"on-remove":e.handleCoversRemove,"on-success":e.handlePicctureCoversSuccess}},[r("i",{staticClass:"el-icon-plus"})]),e._v(" "),r("span",[e._v("只能上传jpg/png文件，建议尺寸为513x321px。")])],1),e._v(" "),r("el-form-item",{attrs:{label:"店铺资质"}},[r("el-upload",{attrs:{action:e.uploadUrl,name:"multipartFile","list-type":"picture-card","file-list":e.imgList,"on-preview":e.handlePicturePreview,"before-upload":e.beforeAvatarUpload,"on-remove":e.handleRemove,"on-success":e.handlePicctureSuccess}},[r("i",{staticClass:"el-icon-plus"})]),e._v(" "),r("span",[e._v("只能上传jpg/png文件，且最多上传9张，建议尺寸宽为750，高不宜超过1200px。")])],1),e._v(" "),r("el-form-item",{attrs:{label:"店铺视频"}},[r("el-upload",{attrs:{action:e.videoUrl,"before-upload":e.showMock,"on-success":e.handleVideoSuccess,"on-remove":e.handleVideoRemove,limit:1,name:"multipartFile","file-list":e.videoList}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"学员数",prop:"studentAmount"}},[r("el-input",{model:{value:e.form.studentAmount,callback:function(t){e.$set(e.form,"studentAmount",t)},expression:"form.studentAmount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"教员数",prop:"teacherAmount"}},[r("el-input",{model:{value:e.form.teacherAmount,callback:function(t){e.$set(e.form,"teacherAmount",t)},expression:"form.teacherAmount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"营业时间",prop:"businessHours"}},[r("el-input",{model:{value:e.form.businessHours,callback:function(t){e.$set(e.form,"businessHours",t)},expression:"form.businessHours"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"课程数",prop:"curriculumAmount"}},[r("el-input",{model:{value:e.form.curriculumAmount,callback:function(t){e.$set(e.form,"curriculumAmount",t)},expression:"form.curriculumAmount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"成立时间",prop:""}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",clearable:!1,"value-format":"yyyy-MM-dd"},model:{value:e.form.establishmentDate,callback:function(t){e.$set(e.form,"establishmentDate",t)},expression:"form.establishmentDate"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"店铺标语",prop:"selfDescription"}},[r("el-input",{staticClass:"el-textarea",attrs:{type:"textarea",rows:4},model:{value:e.form.selfDescription,callback:function(t){e.$set(e.form,"selfDescription",t)},expression:"form.selfDescription"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"店铺介绍",prop:"introduce"}},[r("el-input",{staticClass:"el-textarea",attrs:{type:"textarea",rows:4},model:{value:e.form.introduce,callback:function(t){e.$set(e.form,"introduce",t)},expression:"form.introduce"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"课程类目选择"}},[r("el-transfer",{attrs:{data:e.categoriesValList,props:{key:"categoryId",label:"categoryName"},titles:["未选","已选"]},model:{value:e.form.categories,callback:function(t){e.$set(e.form,"categories",t)},expression:"form.categories"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:e.videoLoading},on:{click:function(t){return e.onSubmit("submitForm")}}},[e._v("提交")]),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:e.videoLoading,expression:"videoLoading"}],staticClass:"el-form-item__error"},[e._v("请等待视频上传完成！")])],1)],1),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.previewImg,alt:""}})])],1)},n=[],s=(r("7f7f"),r("ac4d"),r("8a81"),r("ac6a"),r("39bb")),o=r("b775");function a(e){var t=e.province,r=e.city,i=e.district,n=1,s=n+"/";return t&&(n=2,s=n+"/"+t+"/"),t&&r&&(n=3,s=n+"/"+r+"/"),t&&r&&i&&(n=4,s=n+"/"+i),o["a"].get("web/ChinaCity/"+s)}var c=r("e06a"),u=r("66da"),l={name:"SubbranchDetail",data:function(){return{form:{name:"",businessAddress:"",businessAddressSystem:"",businessHours:"",contactName:"",contactPhone:"",covers:[],curriculumAmount:"",establishmentDate:"",introduce:"",qualifications:[],selfDescription:"",studentAmount:"",teacherAmount:"",categories:[],provinceCode:"",provinceName:"",cityCode:"",cityName:"",districtCode:"",districtName:"",streetCode:"",streetName:"",videoInfo:{videoCoverUrl:"",videoUrl:""}},videoLoading:!1,categoriesValList:[],rules:{name:[{required:!0,message:"请填写店铺名称",trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系方式",trigger:"blur"}],businessHours:[{required:!0,message:"请选择营业时间",trigger:"blur"}],curriculumAmount:[{required:!0,message:"请输入课程数",trigger:"blur"}],establishmentDate:[{required:!0,message:"请输入成立时间",trigger:"blur"}],introduce:[{required:!0,message:"请输入简介",trigger:"blur"}],selfDescription:[{required:!0,message:"请输入自我描述",trigger:"blur"}],studentAmount:[{required:!0,message:"请输入学员数",trigger:"blur"}],teacherAmount:[{required:!0,message:"请输入教员数",trigger:"blur"}],provinceCode:[{required:!0,message:"请选择区域",trigger:"blur"}],cityCode:[{required:!0,message:"请选择区域",trigger:"blur"}],districtCode:[{required:!0,message:"请选择区域",trigger:"blur"}],businessAddress:[{required:!0,message:"请填写地址",trigger:"blur"}]},CoverImgList:[],imgList:[],videoList:[],uploadUrl:s["c"],videoUrl:s["d"],catelogArr:[],courseSeverArr:[],previewImg:"",dialogVisible:!1,chinaCity:{province:"",city:"",district:""},cityList:{province:[],city:[],district:[],street:[]},isAdd:!0}},created:function(){var e=this.$route.query.id;e&&(this.getView(e),this.isAdd=!1),this.getCityList(),this.getCategoriesValList()},methods:{getView:function(e){var t=this,r={id:e};Object(c["f"])(r).then((function(e){if(e.code)return e.message&&t.$warn(e.message);if(e.data){for(var r in t.form=JSON.parse(JSON.stringify(e.data)),t.form.categories=[],e.data.categories.forEach((function(e){t.form.categories.push(e.categoryId)})),e.data.covers.forEach((function(e){t.CoverImgList.push({url:e})})),e.data.qualifications.forEach((function(e){t.imgList.push({url:e})})),t.form.districtCode=e.data.areaCode,t.getCityList(),t.chinaCity)t.chinaCity[r]=t.form[r+"Code"],t.getCityList();t.form.videoInfo.videoUrl&&t.videoList.push({name:"店铺视频",url:t.form.videoInfo.videoUrl})}}))},getCategoriesValList:function(){var e=this;Object(u["c"])().then((function(t){if(t.code)return t.message&&e.$warn(t.message);t.data&&(e.categoriesValList=t.data)}))},getCityList:function(){var e=this;a(this.chinaCity).then((function(t){if(t.code)return t.message&&e.$warn(t.message);if(t.data){var r=t.data,i=r[0].level;if(e.cityList[i]=r,e.form[i+"Code"]){var n=!0,s=!1,o=void 0;try{for(var a,c=r[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var u=a.value;if(e.form[i+"Code"]===u.adcode){if("street"===i)return;return void(e.form[i+"Name"]=u.name)}}}catch(l){s=!0,o=l}finally{try{n||null==c.return||c.return()}finally{if(s)throw o}}}}})).catch((function(e){console.log(e)}))},getSonList:function(e){switch(e){case"province":this.form.cityCode="",this.form.cityName="",this.chinaCity.province="",this.chinaCity.city="",this.cityList.city=[];case"city":this.form.districtCode="",this.form.districtName="",this.chinaCity.district="",this.cityList.district=[];case"district":this.form.streetCode="",this.form.streetName="",this.cityList.street=[];break;default:break}var t=this.form[e+"Name"],r=!0,i=!1,n=void 0;try{for(var s,o=this.cityList[e][Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var a=s.value;if(a.name===t){this.form[e+"Code"]=a.adcode,this.chinaCity[e]=a.adcode;break}}}catch(c){i=!0,n=c}finally{try{r||null==o.return||o.return()}finally{if(i)throw n}}"street"!==e&&this.getCityList()},handleRemove:function(e,t){if("success"===e.status&&e.url){var r=this.form.qualifications.indexOf(e.url);this.form.qualifications.splice(r,1)}},handleCoversRemove:function(e,t){if("success"===e.status&&e.url){var r=this.form.covers.indexOf(e.url);this.form.covers.splice(r,1)}},handlePicturePreview:function(e){this.previewImg=e.url,this.dialogVisible=!0},beforeAvatarUpload:function(e){var t=e.type,r=e.size/1024/1024<2,i=!0;return"image/jpeg"!==t&&"image/png"!==t&&(this.$warn("上传图片只能是 JPG 或 PNG 格式!"),i=!1),r||this.$warn("上传图片大小不能超过 2MB!"),i&&r},handlePicctureSuccess:function(e,t){if(e.code)return e.message&&this.$warn(e.message);e.data&&this.form.qualifications.push(e.data)},handlePicctureCoversSuccess:function(e,t){if(e.code)return e.message&&this.$warn(e.message);e.data&&this.form.covers.push(e.data)},handleVideoSuccess:function(e,t){if(this.videoLoading=!1,e.code)return e.message&&this.$warn(e.message);this.$success("视频上传成功！！！"),this.form.videoInfo.videoCoverUrl=e.data.videoBase.coverURL,this.form.videoInfo.videoUrl=e.data.playInfoList[0].playURL},handleVideoRemove:function(){this.videoLoading=!1,this.form.videoInfo.videoCoverUrl="",this.form.videoInfo.videoUrl=""},showMock:function(){this.videoLoading=!0},onSubmit:function(e){var t=this,r=this.isAdd?c["a"]:c["c"];this.$refs[e].validate((function(e){if(e){var i=t.form;if(i.businessAddressSystem=i.provinceName+i.cityName+i.districtName+i.streetName+i.businessAddress,i.areaCode=i.districtCode,!t.form.covers.length&&!t.form.videoInfo.videoUrl)return t.$warn("店铺视频或店铺封面必须上传其中之一！！！");t.isAdd||(i.storeId=t.$route.query.id),r(i).then((function(e){if(e.code)return e.message&&t.$warn(e.message);t.$success(e.message),t.$router.push({name:"Subbranch"})}))}}))}}},f=l,m=(r("5b2f"),r("2877")),d=Object(m["a"])(f,i,n,!1,null,"2119361e",null);t["default"]=d.exports},"5b2f":function(e,t,r){"use strict";var i=r("83d7"),n=r.n(i);n.a},"66da":function(e,t,r){"use strict";r.d(t,"f",(function(){return n})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return o})),r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return c}));var i=r("b775");function n(){return i["a"].get("boss/business/category")}function s(){return i["a"].get("boss/business/boss/levelOne")}function o(e){var t=e.id;return i["a"].get("boss/business/boss/levelTwo/"+t)}function a(e){var t=e.id;return i["a"].post("boss/business/category/"+t)}function c(e){var t=e.id;return i["a"].delete("boss/business/category/"+t)}function u(){return i["a"].get("boss/business/boss/category4Business")}},"67ab":function(e,t,r){var i=r("ca5a")("meta"),n=r("d3f4"),s=r("69a8"),o=r("86cc").f,a=0,c=Object.isExtensible||function(){return!0},u=!r("79e5")((function(){return c(Object.preventExtensions({}))})),l=function(e){o(e,i,{value:{i:"O"+ ++a,w:{}}})},f=function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,i)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[i].i},m=function(e,t){if(!s(e,i)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[i].w},d=function(e){return u&&v.NEED&&c(e)&&!s(e,i)&&l(e),e},v=e.exports={KEY:i,NEED:!1,fastKey:f,getWeak:m,onFreeze:d}},"7bbc":function(e,t,r){var i=r("6821"),n=r("9093").f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return n(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==s.call(e)?a(e):n(i(e))}},"83d7":function(e,t,r){},"8a81":function(e,t,r){"use strict";var i=r("7726"),n=r("69a8"),s=r("9e1e"),o=r("5ca1"),a=r("2aba"),c=r("67ab").KEY,u=r("79e5"),l=r("5537"),f=r("7f20"),m=r("ca5a"),d=r("2b4c"),v=r("37c8"),p=r("3a72"),b=r("d4c0"),h=r("1169"),g=r("cb7c"),y=r("d3f4"),w=r("4bf8"),C=r("6821"),S=r("6a99"),N=r("4630"),L=r("2aeb"),A=r("7bbc"),_=r("11e9"),k=r("2621"),x=r("86cc"),O=r("0d58"),$=_.f,P=x.f,q=A.f,I=i.Symbol,j=i.JSON,U=j&&j.stringify,E="prototype",D=d("_hidden"),V=d("toPrimitive"),F={}.propertyIsEnumerable,J=l("symbol-registry"),R=l("symbols"),M=l("op-symbols"),H=Object[E],z="function"==typeof I&&!!k.f,T=i.QObject,B=!T||!T[E]||!T[E].findChild,G=s&&u((function(){return 7!=L(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a}))?function(e,t,r){var i=$(H,t);i&&delete H[t],P(e,t,r),i&&e!==H&&P(H,t,i)}:P,K=function(e){var t=R[e]=L(I[E]);return t._k=e,t},W=z&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},Y=function(e,t,r){return e===H&&Y(M,t,r),g(e),t=S(t,!0),g(r),n(R,t)?(r.enumerable?(n(e,D)&&e[D][t]&&(e[D][t]=!1),r=L(r,{enumerable:N(0,!1)})):(n(e,D)||P(e,D,N(1,{})),e[D][t]=!0),G(e,t,r)):P(e,t,r)},Q=function(e,t){g(e);var r,i=b(t=C(t)),n=0,s=i.length;while(s>n)Y(e,r=i[n++],t[r]);return e},X=function(e,t){return void 0===t?L(e):Q(L(e),t)},Z=function(e){var t=F.call(this,e=S(e,!0));return!(this===H&&n(R,e)&&!n(M,e))&&(!(t||!n(this,e)||!n(R,e)||n(this,D)&&this[D][e])||t)},ee=function(e,t){if(e=C(e),t=S(t,!0),e!==H||!n(R,t)||n(M,t)){var r=$(e,t);return!r||!n(R,t)||n(e,D)&&e[D][t]||(r.enumerable=!0),r}},te=function(e){var t,r=q(C(e)),i=[],s=0;while(r.length>s)n(R,t=r[s++])||t==D||t==c||i.push(t);return i},re=function(e){var t,r=e===H,i=q(r?M:C(e)),s=[],o=0;while(i.length>o)!n(R,t=i[o++])||r&&!n(H,t)||s.push(R[t]);return s};z||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=m(arguments.length>0?arguments[0]:void 0),t=function(r){this===H&&t.call(M,r),n(this,D)&&n(this[D],e)&&(this[D][e]=!1),G(this,e,N(1,r))};return s&&B&&G(H,e,{configurable:!0,set:t}),K(e)},a(I[E],"toString",(function(){return this._k})),_.f=ee,x.f=Y,r("9093").f=A.f=te,r("52a7").f=Z,k.f=re,s&&!r("2d00")&&a(H,"propertyIsEnumerable",Z,!0),v.f=function(e){return K(d(e))}),o(o.G+o.W+o.F*!z,{Symbol:I});for(var ie="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;ie.length>ne;)d(ie[ne++]);for(var se=O(d.store),oe=0;se.length>oe;)p(se[oe++]);o(o.S+o.F*!z,"Symbol",{for:function(e){return n(J,e+="")?J[e]:J[e]=I(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in J)if(J[t]===e)return t},useSetter:function(){B=!0},useSimple:function(){B=!1}}),o(o.S+o.F*!z,"Object",{create:X,defineProperty:Y,defineProperties:Q,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:re});var ae=u((function(){k.f(1)}));o(o.S+o.F*ae,"Object",{getOwnPropertySymbols:function(e){return k.f(w(e))}}),j&&o(o.S+o.F*(!z||u((function(){var e=I();return"[null]"!=U([e])||"{}"!=U({a:e})||"{}"!=U(Object(e))}))),"JSON",{stringify:function(e){var t,r,i=[e],n=1;while(arguments.length>n)i.push(arguments[n++]);if(r=t=i[1],(y(t)||void 0!==e)&&!W(e))return h(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!W(t))return t}),i[1]=t,U.apply(j,i)}}),I[E][V]||r("32e9")(I[E],V,I[E].valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},9093:function(e,t,r){var i=r("ce10"),n=r("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,n)}},ac4d:function(e,t,r){r("3a72")("asyncIterator")},d4c0:function(e,t,r){var i=r("0d58"),n=r("2621"),s=r("52a7");e.exports=function(e){var t=i(e),r=n.f;if(r){var o,a=r(e),c=s.f,u=0;while(a.length>u)c.call(e,o=a[u++])&&t.push(o)}return t}},e06a:function(e,t,r){"use strict";r.d(t,"e",(function(){return n})),r.d(t,"a",(function(){return s})),r.d(t,"g",(function(){return c})),r.d(t,"f",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return u})),r.d(t,"d",(function(){return l}));var i=r("b775");function n(e){return i["a"].get("boss/business/home",e)}function s(e){return i["a"].post("boss/business/store",e)}function o(e){var t=e.id;return i["a"].get("boss/business/store/"+t)}function a(e){return i["a"].patch("boss/business/store",e)}function c(e){var t=e.pageNum,r=e.pageSize,n=e.status,s=void 0===n?0:n;return i["a"].get("boss/business/store/"+t+"/"+r+"/"+s)}function u(e){return i["a"].post("boss/business/storeAdmin",e)}function l(e){var t=e.id,r=e.status;return i["a"].patch("boss/business/store/"+t+"/"+r)}}}]);